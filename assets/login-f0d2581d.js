import{a4 as Yt,ag as Wt,d as mt,u as vt,s as Si,q as Dt,a5 as Vt,r as K,f as R,o as A,c as oe,a as k,h as he,e as de,b as w,w as E,k as ze,ao as Qt,j as gt,p as yt,l as _t,_ as H,Z as Kt,y as j,F as Mi,g as zi,t as Ot,ap as Jt,I as U,aq as Oi,ar as ei,as as Di,P as Vi,z as Fi}from"./index-338f6742.js";var ti={exports:{}};/*!
* Proton v4.2.1
* https://github.com/drawcall/Proton
*
* Copyright 2013-2020, A-JIE
* Licensed under the MIT license
* http://www.opensource.org/licenses/mit-license
*
*/(function(o,a){(function(s,n){o.exports=n()})(Yt,function(){var s=3.1415926,n={PI:s,PIx2:2*s,PI_2:s/2,PI_180:s/180,N180_PI:180/s,Infinity:-999,isInfinity:function(e){return e===this.Infinity||e===1/0},randomAToB:function(e,t,i){return 2<arguments.length&&i!==void 0&&i?Math.floor(Math.random()*(t-e))+e:e+Math.random()*(t-e)},randomFloating:function(e,t,i){return this.randomAToB(e-t,e+t,i)},randomColor:function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).slice(-6)},randomZone:function(){},floor:function(e,t){return t=1<arguments.length&&t!==void 0?t:4,t=Math.pow(10,t),Math.floor(e*t)/t},degreeTransform:function(e){return e*s/180},toColor16:function(e){return"#"+e.toString(16)}},u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},d=function(e,t,i){return t&&b(e.prototype,t),i&&b(e,i),e};function b(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,i){e===null&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r!==void 0)return"value"in r?r.value:(r=r.get,r!==void 0?r.call(i):void 0);if((e=Object.getPrototypeOf(e))!==null)return _(e,t,i)}var p=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},v=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t},y=(d(B,[{key:"getValue",value:function(e){return e=0<arguments.length&&e!==void 0&&e,this.isArray?m.getRandFromArray(this.a):this.center?n.randomFloating(this.a,this.b,e):n.randomAToB(this.a,this.b,e)}}],[{key:"setSpanValue",value:function(e,t,i){return e instanceof B?e:t===void 0?new B(e):i===void 0?new B(e,t):new B(e,t,i)}},{key:"getSpanValue",value:function(e){return e instanceof B?e.getValue():e}}]),B);function B(e,t,i){c(this,B),m.isArray(e)?(this.isArray=!0,this.a=e):(this.isArray=!1,this.a=m.initValue(e,1),this.b=m.initValue(t,this.a),this.center=m.initValue(i,!1))}var T=function(e){--e;for(var t=1;t<32;t<<=1)e|=e>>t;return e+1},q=function(e,t){return[1,0,0,0,1,0,e,t,1]},F=function(i){var t=Math.cos(i),i=Math.sin(i);return[t,-i,0,i,t,0,0,0,1]},M=function(e,t){return[e,0,0,0,t,0,0,0,1]},C=function(te,ie){var i=te[0],r=te[1],h=te[2],f=te[3],V=te[4],ee=te[5],N=te[6],Z=te[7],Se=te[8],Y=ie[0],le=ie[1],it=ie[2],nt=ie[3],W=ie[4],Q=ie[5],Mt=ie[6],te=ie[7],ie=ie[8];return[i*Y+r*nt+h*Mt,i*le+r*W+h*te,i*it+r*Q+h*ie,f*Y+V*nt+ee*Mt,f*le+V*W+ee*te,f*it+V*Q+ee*ie,N*Y+Z*nt+Se*Mt,N*le+Z*W+Se*te,N*it+Z*Q+Se*ie]},O={createCanvas:function(e,t,i,f){var h=3<arguments.length&&f!==void 0?f:"absolute",f=document.createElement("canvas");return f.id=e,f.width=t,f.height=i,f.style.opacity=0,f.style.position=h,this.transform(f,-500,-500,0,0),f},createDiv:function(e,t,i){var r=document.createElement("div");return r.id=e,r.style.position="absolute",this.resize(r,t,i),r},resize:function(e,t,i){e.style.width=t+"px",e.style.height=i+"px",e.style.marginLeft=-t/2+"px",e.style.marginTop=-i/2+"px"},transform:function(e,t,i,r,h){e.style.willChange="transform";var f="translate("+t+"px, "+i+"px) scale("+r+") rotate("+h+"deg)";this.css3(e,"transform",f)},transform3d:function(e,t,i,r,h){e.style.willChange="transform",h="translate3d("+t+"px, "+i+"px, 0) scale("+r+") rotate("+h+"deg)",this.css3(e,"backfaceVisibility","hidden"),this.css3(e,"transform",h)},css3:function(e,t,i){var r=t.charAt(0).toUpperCase()+t.substr(1);e.style["Webkit"+r]=i,e.style["Moz"+r]=i,e.style["O"+r]=i,e.style["ms"+r]=i,e.style[""+t]=i}},S={},ne={},P=0,x=function(e,t,i){return e.drawImage(t,i.x,i.y),t=e.getImageData(i.x,i.y,i.width,i.height),e.clearRect(i.x,i.y,i.width,i.height),t},L=function(e,t,i){var r=typeof e=="string"?e:e.src;S[r]?t(S[r],i):((e=new Image).onload=function(h){S[r]=h.target,t(S[r],i)},e.src=r)},$=function(e,t,i){var r,h,f=e.src;return ne[f]||(r=T(e.width),h=T(e.height),(h=O.createCanvas("proton_canvas_cache_"+ ++P,r,h)).getContext("2d").drawImage(e,0,0,e.width,e.height),ne[f]=h),t&&t(ne[f],i),ne[f]},m={initValue:function(e,t){return e=e??t},isArray:function(e){return Object.prototype.toString.call(e)==="[object Array]"},emptyArray:function(e){e&&(e.length=0)},toArray:function(e){return this.isArray(e)?e:[e]},getRandFromArray:function(e){return e?e[Math.floor(e.length*Math.random())]:null},emptyObject:function(e,t){var i,r=1<arguments.length&&t!==void 0?t:null;for(i in e)r&&-1<r.indexOf(i)||delete e[i]},classApply:function(e,t){return t=1<arguments.length&&t!==void 0?t:null,new(t?e.bind.apply(e,[null].concat(t)):e)},setVectorVal:function(e,t){t=1<arguments.length&&t!==void 0?t:null,t&&(this.hasProp(t,"x")&&(e.p.x=t.x),this.hasProp(t,"y")&&(e.p.y=t.y),this.hasProp(t,"vx")&&(e.v.x=t.vx),this.hasProp(t,"vy")&&(e.v.y=t.vy),this.hasProp(t,"ax")&&(e.a.x=t.ax),this.hasProp(t,"ay")&&(e.a.y=t.ay),this.hasProp(t,"p")&&e.p.copy(t.p),this.hasProp(t,"v")&&e.v.copy(t.v),this.hasProp(t,"a")&&e.a.copy(t.a),this.hasProp(t,"position")&&e.p.copy(t.position),this.hasProp(t,"velocity")&&e.v.copy(t.velocity),this.hasProp(t,"accelerate")&&e.a.copy(t.accelerate))},hasProp:function(e,t){return!!e&&e[t]!==void 0},setProp:function(e,t){for(var i in t)e.hasOwnProperty(i)&&(e[i]=y.getSpanValue(t[i]));return e},getImageData:function(e,t,i){return x(e,t,i)},destroyAll:function(e,t){for(var i=1<arguments.length&&t!==void 0?t:null,r=e.length;r--;){try{e[r].destroy(i)}catch{}delete e[r]}e.length=0},assign:function(e,t){if(typeof Object.assign=="function")return Object.assign(e,t);for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}},ce={},X={_index:0,_cache:{},id:function(e){return ce[e]!==void 0&&ce[e]!==null||(ce[e]=0),e+"_"+ce[e]++},getId:function(e){var t=this.getIdFromCache(e);return t||(t="PUID_"+this._index++,this._cache[t]=e,t)},getIdFromCache:function(e){var t,i=void 0;for(i in this._cache)if((t=this._cache[i])===e||this.isBody(t,e)&&t.src===e.src)return i;return null},isBody:function(e,t){return(e===void 0?"undefined":u(e))==="object"&&(t===void 0?"undefined":u(t))==="object"&&e.isInner&&t.isInner},getTarget:function(e){return this._cache[e]}},pe=(d(Oe,[{key:"get",value:function(e,t,i){var r=void 0;return i=i||e.__puid||X.getId(e),(r=this.cache[i]&&0<this.cache[i].length?this.cache[i].pop():this.createOrClone(e,t)).__puid=e.__puid||i,r}},{key:"expire",value:function(e){return this.getCache(e.__puid).push(e)}},{key:"createOrClone",value:function(e,t){return this.total++,this.create?this.create(e,t):typeof e=="function"?m.classApply(e,t):e.clone()}},{key:"getCount",value:function(){var e,t=0;for(e in this.cache)t+=this.cache[e].length;return t++}},{key:"destroy",value:function(){for(var e in this.cache)this.cache[e].length=0,delete this.cache[e]}},{key:"getCache",value:function(e){return e=0<arguments.length&&e!==void 0?e:"default",this.cache[e]||(this.cache[e]=[]),this.cache[e]}}]),Oe);function Oe(e){c(this,Oe),this.total=0,this.cache={}}var wt=(d(rt,[{key:"update",value:function(r,h){this.add(r,h);var i=this.getEmitter(),r=this.getRenderer(),h="";switch(this.type){case 2:h+="emitter:"+this.proton.emitters.length+"<br>",i&&(h+="em speed:"+i.emitSpeed+"<br>"),i&&(h+="pos:"+this.getEmitterPos(i));break;case 3:i&&(h+="initializes:"+i.initializes.length+"<br>"),i&&(h+='<span style="display:inline-block;">'+this.concatArr(i.initializes)+"</span><br>"),i&&(h+="behaviours:"+i.behaviours.length+"<br>"),i&&(h+='<span style="display:inline-block;">'+this.concatArr(i.behaviours)+"</span><br>");break;case 4:r&&(h+=r.name+"<br>"),r&&(h+="body:"+this.getCreatedNumber(r)+"<br>");break;default:h+="particles:"+this.proton.getCount()+"<br>",h+="pool:"+this.proton.pool.getCount()+"<br>",h+="total:"+this.proton.pool.total}this.container.innerHTML=h}},{key:"add",value:function(e,t){var i=this;if(!this.container){this.type=1,this.container=document.createElement("div"),this.container.style.cssText=["position:absolute;bottom:0px;left:0;cursor:pointer;","opacity:0.9;z-index:10000;padding:10px;font-size:12px;font-family:Helvetica,Arial,sans-serif;","width:120px;height:50px;background-color:#002;color:#0ff;"].join(""),this.container.addEventListener("click",function(f){i.type++,4<i.type&&(i.type=1)},!1);var r=void 0,h=void 0;switch(e){case 2:r="#201",h="#f08";break;case 3:r="#020",h="#0f0";break;default:r="#002",h="#0ff"}this.container.style["background-color"]=r,this.container.style.color=h}this.container.parentNode||(t=t||this.body||document.body).appendChild(this.container)}},{key:"getEmitter",value:function(){return this.proton.emitters[this.emitterIndex]}},{key:"getRenderer",value:function(){return this.proton.renderers[this.rendererIndex]}},{key:"concatArr",value:function(e){var t="";if(!e||!e.length)return t;for(var i=0;i<e.length;i++)t+=(e[i].name||"").substr(0,1)+".";return t}},{key:"getCreatedNumber",value:function(e){return e.pool.total||e.cpool&&e.cpool.total||0}},{key:"getEmitterPos",value:function(e){return Math.round(e.p.x)+","+Math.round(e.p.y)}}]),rt);function rt(e){c(this,rt),this.proton=e,this.container=null,this.type=1,this.emitterIndex=0,this.rendererIndex=0}var De=(d(I,[{key:"addEventListener",value:function(e,t){return this._listeners?this.removeEventListener(e,t):this._listeners={},this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t),t}},{key:"removeEventListener",value:function(e,t){if(this._listeners&&this._listeners[e]){for(var i=this._listeners[e],r=i.length,h=0;h<r;h++)if(i[h]===t){r===1?delete this._listeners[e]:i.splice(h,1);break}}}},{key:"removeAllEventListeners",value:function(e){e?this._listeners&&delete this._listeners[e]:this._listeners=null}},{key:"dispatchEvent",value:function(e,t){var i=!1,r=this._listeners;if(e&&r){var h=r[e];if(!h)return i;for(var f=void 0,V=h.length;V--;)f=h[V],i=i||f(t)}return!!i}},{key:"hasEventListener",value:function(e){var t=this._listeners;return!(!t||!t[e])}}],[{key:"bind",value:function(e){e.prototype.dispatchEvent=I.prototype.dispatchEvent,e.prototype.hasEventListener=I.prototype.hasEventListener,e.prototype.addEventListener=I.prototype.addEventListener,e.prototype.removeEventListener=I.prototype.removeEventListener,e.prototype.removeAllEventListeners=I.prototype.removeAllEventListeners}}]),I);function I(){c(this,I),this._listeners=null}var ai=(d(xt,[{key:"calculate",value:function(e,t,i){this.eulerIntegrate(e,t,i)}},{key:"eulerIntegrate",value:function(e,t,i){e.sleep||(e.old.p.copy(e.p),e.old.v.copy(e.v),e.a.multiplyScalar(1/e.mass),e.v.add(e.a.multiplyScalar(t)),e.p.add(e.old.v.multiplyScalar(t)),i&&e.v.multiplyScalar(i),e.a.clear())}}]),xt);function xt(e){c(this,xt),this.type=e}var g=(d(G,[{key:"addRenderer",value:function(e){e.init(this),this.renderers.push(e)}},{key:"removeRenderer",value:function(e){var t=this.renderers.indexOf(e);this.renderers.splice(t,1),e.remove(this)}},{key:"addEmitter",value:function(e){this.emitters.push(e),(e.parent=this).dispatchEvent(G.EMITTER_ADDED,e)}},{key:"removeEmitter",value:function(e){var t=this.emitters.indexOf(e);this.emitters.splice(t,1),e.parent=null,this.dispatchEvent(G.EMITTER_REMOVED,e)}},{key:"update",value:function(){this._fps==="auto"?(this.dispatchEvent(G.PROTON_UPDATE),G.USE_CLOCK?(this.then||(this.then=new Date().getTime()),this.now=new Date().getTime(),this.elapsed=.001*(this.now-this.then),this.amendChangeTabsBug(),0<this.elapsed&&this.emittersUpdate(this.elapsed),this.then=this.now):this.emittersUpdate(G.DEFAULT_INTERVAL),this.dispatchEvent(G.PROTON_UPDATE_AFTER)):(this.then||(this.then=new Date().getTime()),this.now=new Date().getTime(),this.elapsed=.001*(this.now-this.then),this.elapsed>this._interval&&(this.dispatchEvent(G.PROTON_UPDATE),this.emittersUpdate(this._interval),this.then=this.now-this.elapsed%this._interval*1e3,this.dispatchEvent(G.PROTON_UPDATE_AFTER)))}},{key:"emittersUpdate",value:function(e){for(var t=this.emitters.length;t--;)this.emitters[t].update(e)}},{key:"amendChangeTabsBug",value:function(){G.amendChangeTabsBug&&.5<this.elapsed&&(this.then=new Date().getTime(),this.elapsed=0)}},{key:"getCount",value:function(){for(var e=0,t=this.emitters.length;t--;)e+=this.emitters[t].particles.length;return e}},{key:"getAllParticles",value:function(){for(var e=[],t=this.emitters.length;t--;)e=e.concat(this.emitters[t].particles);return e}},{key:"destroyAllEmitters",value:function(){m.destroyAll(this.emitters)}},{key:"destroy",value:function(e){function t(){i.time=0,i.then=0,i.pool.destroy(),m.destroyAll(i.emitters),m.destroyAll(i.renderers,i.getAllParticles())}var i=this;0<arguments.length&&e!==void 0&&e?setTimeout(t,200):t()}},{key:"fps",set:function(e){this._fps=e,this._interval=e==="auto"?G.DEFAULT_INTERVAL:n.floor(1/e,7)},get:function(){return this._fps}}]),G);function G(e){c(this,G),this.emitters=[],this.renderers=[],this.time=0,this.now=0,this.then=0,this.elapsed=0,this.stats=new wt(this),this.pool=new pe(80),this.integrationType=m.initValue(e,G.EULER),this.integrator=new ai(this.integrationType),this._fps="auto",this._interval=G.DEFAULT_INTERVAL}g.USE_CLOCK=!1,g.MEASURE=100,g.EULER="euler",g.RK2="runge-kutta2",g.PARTICLE_CREATED="PARTICLE_CREATED",g.PARTICLE_UPDATE="PARTICLE_UPDATE",g.PARTICLE_SLEEP="PARTICLE_SLEEP",g.PARTICLE_DEAD="PARTICLE_DEAD",g.EMITTER_ADDED="EMITTER_ADDED",g.EMITTER_REMOVED="EMITTER_REMOVED",g.PROTON_UPDATE="PROTON_UPDATE",g.PROTON_UPDATE_AFTER="PROTON_UPDATE_AFTER",g.DEFAULT_INTERVAL=.0167,g.amendChangeTabsBug=!0,De.bind(g);var oi=(d(Pt,[{key:"reset",value:function(){this.r=255,this.g=255,this.b=255}}]),Pt);function Pt(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:255,i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:255;c(this,Pt),this.r=e,this.g=t,this.b=i}var st={easeLinear:function(e){return e},easeInQuad:function(e){return Math.pow(e,2)},easeOutQuad:function(e){return-(Math.pow(e-1,2)-1)},easeInOutQuad:function(e){return(e/=.5)<1?.5*Math.pow(e,2):-.5*((e-=2)*e-2)},easeInCubic:function(e){return Math.pow(e,3)},easeOutCubic:function(e){return Math.pow(e-1,3)+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)},easeInQuart:function(e){return Math.pow(e,4)},easeOutQuart:function(e){return-(Math.pow(e-1,4)-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},easeInSine:function(e){return 1-Math.cos(e*n.PI_2)},easeOutSine:function(e){return Math.sin(e*n.PI_2)},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return e===0?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return e===1?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return e===0?0:e===1?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-Math.pow(e-1,2))},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInBack:function(e){return e*e*(2.70158*e-1.70158)},easeOutBack:function(e){return--e*e*(2.70158*e+1.70158)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},getEasing:function(e){return typeof e=="function"?e:this[e]||this.easeLinear}},D=(d(ct,[{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"getGradient",value:function(){return this.x!==0?Math.atan2(this.y,this.x):0<this.y?n.PI_2:this.y<0?-n.PI_2:void 0}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e,t){return t!==void 0?this.addVectors(e,t):(this.x+=e.x,this.y+=e.y,this)}},{key:"addXY",value:function(e,t){return this.x+=e,this.y+=t,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"sub",value:function(e,t){return t!==void 0?this.subVectors(e,t):(this.x-=e.x,this.y-=e.y,this)}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"divideScalar",value:function(e){return e!==0?(this.x/=e,this.y/=e):this.set(0,0),this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"negate",value:function(){return this.multiplyScalar(-1)}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length())}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"rotate",value:function(e){var t=this.x,i=this.y;return this.x=t*Math.cos(e)+i*Math.sin(e),this.y=-t*Math.sin(e)+i*Math.cos(e),this}},{key:"distanceToSquared",value:function(i){var t=this.x-i.x,i=this.y-i.y;return t*t+i*i}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"clear",value:function(){return this.x=0,this.y=0,this}},{key:"clone",value:function(){return new ct(this.x,this.y)}}]),ct);function ct(e,t){c(this,ct),this.x=e||0,this.y=t||0}var kt=(d(Ct,[{key:"getDirection",value:function(){return Math.atan2(this.v.x,-this.v.y)*n.N180_PI}},{key:"reset",value:function(){return this.life=1/0,this.age=0,this.dead=!1,this.sleep=!1,this.body=null,this.sprite=null,this.parent=null,this.energy=1,this.mass=1,this.radius=10,this.alpha=1,this.scale=1,this.rotation=0,this.color=null,this.p.set(0,0),this.v.set(0,0),this.a.set(0,0),this.old.p.set(0,0),this.old.v.set(0,0),this.old.a.set(0,0),this.easing=st.easeLinear,this.rgb.reset(),m.emptyObject(this.data),this.removeAllBehaviours(),this}},{key:"update",value:function(e,t){this.sleep||(this.age+=e,this.applyBehaviours(e,t)),this.age<this.life?(t=this.easing(this.age/this.life),this.energy=Math.max(1-t,0)):this.destroy()}},{key:"applyBehaviours",value:function(e,t){for(var i=this.behaviours.length,r=void 0,r=0;r<i;r++)this.behaviours[r]&&this.behaviours[r].applyBehaviour(this,e,t)}},{key:"addBehaviour",value:function(e){this.behaviours.push(e),e.hasOwnProperty("parents")&&e.parents.push(this),e.initialize(this)}},{key:"addBehaviours",value:function(e){for(var t=e.length,i=void 0,i=0;i<t;i++)this.addBehaviour(e[i])}},{key:"removeBehaviour",value:function(e){e=this.behaviours.indexOf(e),-1<e&&(this.behaviours.splice(e,1).parents=null)}},{key:"removeAllBehaviours",value:function(){m.emptyArray(this.behaviours)}},{key:"destroy",value:function(){this.removeAllBehaviours(),this.energy=0,this.dead=!0,this.parent=null}}]),Ct);function Ct(e){c(this,Ct),this.id="",this.old={},this.data={},this.behaviours=[],this.p=[],this.v=[],this.a=[],this.rgb={},this.name="Particle",this.id=X.id(this.name),this.old={},this.data={},this.behaviours=[],this.p=new D,this.v=new D,this.a=new D,this.old.p=new D,this.old.v=new D,this.old.a=new D,this.rgb=new oi,this.reset(),e&&m.setProp(this,e)}var Ve={hexToRgb:function(e){return e=e.charAt(0)==="#"?e.substring(1,7):e,{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16)}},rgbToHex:function(e){return"rgb("+e.r+", "+e.g+", "+e.b+")"},getHex16FromParticle:function(e){return 65536*Number(e.rgb.r)+256*Number(e.rgb.g)+Number(e.rgb.b)}},Lt=(d(ut,[{key:"set",value:function(e,t){return this.r=e,this.tha=t,this}},{key:"setR",value:function(e){return this.r=e,this}},{key:"setTha",value:function(e){return this.tha=e,this}},{key:"copy",value:function(e){return this.r=e.r,this.tha=e.tha,this}},{key:"toVector",value:function(){return new D(this.getX(),this.getY())}},{key:"getX",value:function(){return this.r*Math.sin(this.tha)}},{key:"getY",value:function(){return-this.r*Math.cos(this.tha)}},{key:"normalize",value:function(){return this.r=1,this}},{key:"equals",value:function(e){return e.r===this.r&&e.tha===this.tha}},{key:"clear",value:function(){return this.r=0,this.tha=0,this}},{key:"clone",value:function(){return new ut(this.r,this.tha)}}]),ut);function ut(e,t){c(this,ut),this.r=Math.abs(e)||0,this.tha=t||0}var ae={create:function(e){var t=new Float32Array(9);return e&&this.set(e,t),t},set:function(e,t){for(var i=0;i<9;i++)t[i]=e[i];return t},multiply:function(W,Q,i){var r=W[0],h=W[1],f=W[2],V=W[3],ee=W[4],N=W[6],Z=W[7],Se=Q[0],Y=Q[1],le=Q[2],it=Q[3],nt=Q[4],W=Q[6],Q=Q[7];return i[0]=Se*r+Y*V,i[1]=Se*h+Y*ee,i[2]=f*le,i[3]=it*r+nt*V,i[4]=it*h+nt*ee,i[6]=W*r+Q*V+N,i[7]=W*h+Q*ee+Z,i},inverse:function(N,t){var i=N[0],r=N[1],Z=N[3],h=N[4],f=N[6],V=N[7],ee=-Z,N=V*Z-h*f,Z=1/(i*h+r*ee);return t[0]=h*Z,t[1]=-r*Z,t[3]=ee*Z,t[4]=i*Z,t[6]=N*Z,t[7]=(-V*i+r*f)*Z,t},multiplyVec2:function(e,h,i){var r=h[0],h=h[1];return i[0]=r*e[0]+h*e[3]+e[6],i[1]=r*e[1]+h*e[4]+e[7],i}},Fe=(p(fe,y),d(fe,[{key:"getValue",value:function(){var e=m.getRandFromArray(this._arr);return e==="random"||e==="Random"?n.randomColor():e}}],[{key:"createArraySpan",value:function(e){return e?e instanceof fe?e:new fe(e):null}}]),fe);function fe(e){c(this,fe);var t=v(this,(fe.__proto__||Object.getPrototypeOf(fe)).call(this));return t._arr=m.toArray(e),t}var Ut=(d(Rt,[{key:"contains",value:function(e,t){return e<=this.right&&e>=this.x&&t<=this.bottom&&t>=this.y}}]),Rt);function Rt(e,t,i,r){c(this,Rt),this.x=e,this.y=t,this.width=i,this.height=r,this.bottom=this.y+this.height,this.right=this.x+this.width}var jt=(d(Et,[{key:"init",value:function(){this.startTime=0,this.nextTime=this.timePan.getValue()}},{key:"getValue",value:function(e){return this.startTime+=e,this.startTime>=this.nextTime?(this.startTime=0,this.nextTime=this.timePan.getValue(),this.numPan.b===1?.5<this.numPan.getValue(!1)?1:0:this.numPan.getValue(!0)):0}}]),Et);function Et(e,t){c(this,Et),this.numPan=y.setSpanValue(m.initValue(e,1)),this.timePan=y.setSpanValue(m.initValue(t,1)),this.startTime=0,this.nextTime=0,this.init()}var ve=(d(It,[{key:"reset",value:function(){}},{key:"init",value:function(e,t){t?this.initialize(t):this.initialize(e)}},{key:"initialize",value:function(){}}]),It);function It(){c(this,It)}var ri=(p(Le,ve),d(Le,[{key:"initialize",value:function(e){this.lifePan.a===1/0?e.life=1/0:e.life=this.lifePan.getValue()}}]),Le);function Le(e,t,i){c(this,Le);var r=v(this,(Le.__proto__||Object.getPrototypeOf(Le)).call(this));return r.lifePan=y.setSpanValue(e,t,i),r.name="Life",r}var Ue=(d(At,[{key:"getPosition",value:function(){}},{key:"crossing",value:function(){}}]),At);function At(){c(this,At),this.vector=new D(0,0),this.random=0,this.crossType="dead",this.alert=!0}var dt=(p(je,Ue),d(je,[{key:"getPosition",value:function(){return this.vector.x=this.x,this.vector.y=this.y,this.vector}},{key:"crossing",value:function(){this.alert&&(console.error("Sorry, PointZone does not support crossing method!"),this.alert=!1)}}]),je);function je(e,t){c(this,je);var i=v(this,(je.__proto__||Object.getPrototypeOf(je)).call(this));return i.x=e,i.y=t,i}var si=(p(Ne,ve),d(Ne,[{key:"reset",value:function(e){this.zone=m.initValue(e,new dt)}},{key:"initialize",value:function(e){this.zone.getPosition(),e.p.x=this.zone.vector.x,e.p.y=this.zone.vector.y}}]),Ne);function Ne(e){c(this,Ne);var t=v(this,(Ne.__proto__||Object.getPrototypeOf(Ne)).call(this));return t.zone=m.initValue(e,new dt),t.name="Position",t}var li=(p(Ze,ve),d(Ze,[{key:"reset",value:function(e,t,i){this.rPan=y.setSpanValue(e),this.thaPan=y.setSpanValue(t),this.type=m.initValue(i,"vector")}},{key:"normalizeVelocity",value:function(e){return e*g.MEASURE}},{key:"initialize",value:function(e){var t;this.type==="p"||this.type==="P"||this.type==="polar"?(t=new Lt(this.normalizeVelocity(this.rPan.getValue()),this.thaPan.getValue()*n.PI_180),e.v.x=t.getX(),e.v.y=t.getY()):(e.v.x=this.normalizeVelocity(this.rPan.getValue()),e.v.y=this.normalizeVelocity(this.thaPan.getValue()))}}]),Ze);function Ze(e,t,i){c(this,Ze);var r=v(this,(Ze.__proto__||Object.getPrototypeOf(Ze)).call(this));return r.rPan=y.setSpanValue(e),r.thaPan=y.setSpanValue(t),r.type=m.initValue(i,"vector"),r.name="Velocity",r}var hi=(p($e,ve),d($e,[{key:"initialize",value:function(e){e.mass=this.massPan.getValue()}}]),$e);function $e(e,t,i){c(this,$e);var r=v(this,($e.__proto__||Object.getPrototypeOf($e)).call(this));return r.massPan=y.setSpanValue(e,t,i),r.name="Mass",r}var ci=(p(He,ve),d(He,[{key:"reset",value:function(e,t,i){this.radius=y.setSpanValue(e,t,i)}},{key:"initialize",value:function(e){e.radius=this.radius.getValue(),e.data.oldRadius=e.radius}}]),He);function He(e,t,i){c(this,He);var r=v(this,(He.__proto__||Object.getPrototypeOf(He)).call(this));return r.radius=y.setSpanValue(e,t,i),r.name="Radius",r}var ui=(p(qe,ve),d(qe,[{key:"initialize",value:function(e){var t=this.image.getValue();e.body=typeof t=="string"?{width:this.w,height:this.h,src:t,isInner:!0,inner:!0}:t}},{key:"setSpanValue",value:function(e){return e instanceof Fe?e:new Fe(e)}}]),qe);function qe(e,t,i){c(this,qe);var r=v(this,(qe.__proto__||Object.getPrototypeOf(qe)).call(this));return r.image=r.setSpanValue(e),r.w=m.initValue(t,20),r.h=m.initValue(i,r.w),r.name="Body",r}var J=(d(pt,[{key:"reset",value:function(e,t){this.life=m.initValue(e,1/0),this.easing=st.getEasing(t)}},{key:"normalizeForce",value:function(e){return e.multiplyScalar(g.MEASURE)}},{key:"normalizeValue",value:function(e){return e*g.MEASURE}},{key:"initialize",value:function(){}},{key:"calculate",value:function(e,t){this.age+=t,this.age>=this.life||this.dead?(this.energy=0,this.dead=!0,this.destroy()):(e=this.easing(e.age/e.life),this.energy=Math.max(1-e,0))}},{key:"destroy",value:function(){for(var e=this.parents.length;e--;)this.parents[e].removeBehaviour(this);this.parents.length=0}}]),pt);function pt(e,t){c(this,pt),this.life=m.initValue(e,1/0),this.easing=st.getEasing(t),this.age=0,this.energy=1,this.dead=!1,this.parents=[],this.id="Behaviour_"+pt.id++,this.name="Behaviour"}J.id=0;var Nt=(p(ge,J),d(ge,[{key:"reset",value:function(e,t,i,r){this.force=this.normalizeForce(new D(e,t)),i&&_(ge.prototype.__proto__||Object.getPrototypeOf(ge.prototype),"reset",this).call(this,i,r)}},{key:"applyBehaviour",value:function(e,t,i){this.calculate(e,t,i),e.a.add(this.force)}}]),ge);function ge(e,t,i,r){return c(this,ge),r=v(this,(ge.__proto__||Object.getPrototypeOf(ge)).call(this,i,r)),r.force=r.normalizeForce(new D(e,t)),r.name="Force",r}var Zt=(p(me,J),d(me,[{key:"reset",value:function(e,t,i,r,h){this.targetPosition=m.initValue(e,new D),this.radius=m.initValue(i,1e3),this.force=m.initValue(this.normalizeValue(t),100),this.radiusSq=this.radius*this.radius,this.attractionForce=new D,this.lengthSq=0,r&&_(me.prototype.__proto__||Object.getPrototypeOf(me.prototype),"reset",this).call(this,r,h)}},{key:"applyBehaviour",value:function(e,t,i){this.calculate(e,t,i),this.attractionForce.copy(this.targetPosition),this.attractionForce.sub(e.p),this.lengthSq=this.attractionForce.lengthSq(),4e-5<this.lengthSq&&this.lengthSq<this.radiusSq&&(this.attractionForce.normalize(),this.attractionForce.multiplyScalar(1-this.lengthSq/this.radiusSq),this.attractionForce.multiplyScalar(this.force),e.a.add(this.attractionForce))}}]),me);function me(e,t,i,r,h){return c(this,me),h=v(this,(me.__proto__||Object.getPrototypeOf(me)).call(this,r,h)),h.targetPosition=m.initValue(e,new D),h.radius=m.initValue(i,1e3),h.force=m.initValue(h.normalizeValue(t),100),h.radiusSq=h.radius*h.radius,h.attractionForce=new D,h.lengthSq=0,h.name="Attraction",h}var di=(p(ye,J),d(ye,[{key:"reset",value:function(e,t,i,r,h){this.panFoce=new D(e,t),this.panFoce=this.normalizeForce(this.panFoce),this.delay=i,r&&_(ye.prototype.__proto__||Object.getPrototypeOf(ye.prototype),"reset",this).call(this,r,h)}},{key:"initialize",value:function(e){e.data.time=0}},{key:"applyBehaviour",value:function(e,t,i){this.calculate(e,t,i),e.data.time+=t,e.data.time>=this.delay&&(e.a.addXY(n.randomAToB(-this.panFoce.x,this.panFoce.x),n.randomAToB(-this.panFoce.y,this.panFoce.y)),e.data.time=0)}}]),ye);function ye(e,t,i,r,h){return c(this,ye),h=v(this,(ye.__proto__||Object.getPrototypeOf(ye)).call(this,r,h)),h.reset(e,t,i),h.time=0,h.name="RandomDrift",h}var pi=(p(_e,Nt),d(_e,[{key:"reset",value:function(e,t,i){_(_e.prototype.__proto__||Object.getPrototypeOf(_e.prototype),"reset",this).call(this,0,e,t,i)}}]),_e);function _e(e,t,i){return c(this,_e),i=v(this,(_e.__proto__||Object.getPrototypeOf(_e)).call(this,0,e,t,i)),i.name="Gravity",i}var fi=(p(be,J),d(be,[{key:"reset",value:function(e,t,i,r,h){this.emitter=m.initValue(e,null),this.mass=m.initValue(t,!0),this.callback=m.initValue(i,null),this.collisionPool=[],this.delta=new D,r&&_(be.prototype.__proto__||Object.getPrototypeOf(be.prototype),"reset",this).call(this,r,h)}},{key:"applyBehaviour",value:function(e,t,i){for(var r,h,f,V,ee,N,Z=(this.emitter?this.emitter.particles:this.pool).slice(i),Se=Z.length,Y=void 0,le=void 0,le=0;le<Se;le++)(Y=Z[le])!==e&&(this.delta.copy(Y.p),this.delta.sub(e.p),(r=this.delta.lengthSq())<=(N=e.radius+Y.radius)*N&&(h=N-Math.sqrt(r),h+=.5,f=e.mass+Y.mass,V=this.mass?Y.mass/f:.5,ee=this.mass?e.mass/f:.5,e.p.add(this.delta.clone().normalize().multiplyScalar(h*-V)),Y.p.add(this.delta.normalize().multiplyScalar(h*ee)),this.callback&&this.callback(e,Y)))}}]),be);function be(e,t,i,r,h){return c(this,be),h=v(this,(be.__proto__||Object.getPrototypeOf(be)).call(this,r,h)),h.reset(e,t,i),h.name="Collision",h}var vi=(p(we,J),d(we,[{key:"reset",value:function(e,t,i,r){this.zone=e,this.zone.crossType=m.initValue(t,"dead"),i&&_(we.prototype.__proto__||Object.getPrototypeOf(we.prototype),"reset",this).call(this,i,r)}},{key:"applyBehaviour",value:function(e,t,i){this.calculate(e,t,i),this.zone.crossing(e)}}]),we);function we(e,t,i,r){return c(this,we),r=v(this,(we.__proto__||Object.getPrototypeOf(we)).call(this,i,r)),r.reset(e,t),r.name="CrossZone",r}var gi=(p(xe,J),d(xe,[{key:"reset",value:function(e,t,i,r){this.same=t==null,this.a=y.setSpanValue(m.initValue(e,1)),this.b=y.setSpanValue(t),i&&_(xe.prototype.__proto__||Object.getPrototypeOf(xe.prototype),"reset",this).call(this,i,r)}},{key:"initialize",value:function(e){e.data.alphaA=this.a.getValue(),this.same?e.data.alphaB=e.data.alphaA:e.data.alphaB=this.b.getValue()}},{key:"applyBehaviour",value:function(e,t,i){this.calculate(e,t,i),e.alpha=e.data.alphaB+(e.data.alphaA-e.data.alphaB)*this.energy,e.alpha<.001&&(e.alpha=0)}}]),xe);function xe(e,t,i,r){return c(this,xe),r=v(this,(xe.__proto__||Object.getPrototypeOf(xe)).call(this,i,r)),r.reset(e,t),r.name="Alpha",r}var mi=(p(Pe,J),d(Pe,[{key:"reset",value:function(e,t,i,r){this.same=t==null,this.a=y.setSpanValue(m.initValue(e,1)),this.b=y.setSpanValue(t),i&&_(Pe.prototype.__proto__||Object.getPrototypeOf(Pe.prototype),"reset",this).call(this,i,r)}},{key:"initialize",value:function(e){e.data.scaleA=this.a.getValue(),e.data.oldRadius=e.radius,e.data.scaleB=this.same?e.data.scaleA:this.b.getValue()}},{key:"applyBehaviour",value:function(e,t,i){this.calculate(e,t,i),e.scale=e.data.scaleB+(e.data.scaleA-e.data.scaleB)*this.energy,e.scale<1e-4&&(e.scale=0),e.radius=e.data.oldRadius*e.scale}}]),Pe);function Pe(e,t,i,r){return c(this,Pe),r=v(this,(Pe.__proto__||Object.getPrototypeOf(Pe)).call(this,i,r)),r.reset(e,t),r.name="Scale",r}var yi=(p(ke,J),d(ke,[{key:"reset",value:function(e,t,i,r,h){this.same=t==null,this.a=y.setSpanValue(m.initValue(e,"Velocity")),this.b=y.setSpanValue(m.initValue(t,0)),this.style=m.initValue(i,"to"),r&&_(ke.prototype.__proto__||Object.getPrototypeOf(ke.prototype),"reset",this).call(this,r,h)}},{key:"initialize",value:function(e){e.rotation=this.a.getValue(),e.data.rotationA=this.a.getValue(),this.same||(e.data.rotationB=this.b.getValue())}},{key:"applyBehaviour",value:function(e,t,i){this.calculate(e,t,i),this.same?this.a.a!=="V"&&this.a.a!=="Velocity"&&this.a.a!=="v"||(e.rotation=e.getDirection()):this.style==="to"||this.style==="TO"||this.style==="_"?e.rotation+=e.data.rotationB+(e.data.rotationA-e.data.rotationB)*this.energy:e.rotation+=e.data.rotationB}}]),ke);function ke(e,t,i,r,h){return c(this,ke),h=v(this,(ke.__proto__||Object.getPrototypeOf(ke)).call(this,r,h)),h.reset(e,t,i),h.name="Rotate",h}var _i=(p(Ce,J),d(Ce,[{key:"reset",value:function(e,t,i,r){this.a=Fe.createArraySpan(e),this.b=Fe.createArraySpan(t),i&&_(Ce.prototype.__proto__||Object.getPrototypeOf(Ce.prototype),"reset",this).call(this,i,r)}},{key:"initialize",value:function(e){e.color=this.a.getValue(),e.data.colorA=Ve.hexToRgb(e.color),this.b&&(e.data.colorB=Ve.hexToRgb(this.b.getValue()))}},{key:"applyBehaviour",value:function(e,t,i){this.b?(this.calculate(e,t,i),e.rgb.r=e.data.colorB.r+(e.data.colorA.r-e.data.colorB.r)*this.energy,e.rgb.g=e.data.colorB.g+(e.data.colorA.g-e.data.colorB.g)*this.energy,e.rgb.b=e.data.colorB.b+(e.data.colorA.b-e.data.colorB.b)*this.energy,e.rgb.r=Math.floor(e.rgb.r),e.rgb.g=Math.floor(e.rgb.g),e.rgb.b=Math.floor(e.rgb.b)):(e.rgb.r=e.data.colorA.r,e.rgb.g=e.data.colorA.g,e.rgb.b=e.data.colorA.b)}}]),Ce);function Ce(e,t,i,r){return c(this,Ce),r=v(this,(Ce.__proto__||Object.getPrototypeOf(Ce)).call(this,i,r)),r.reset(e,t),r.name="Color",r}var Bt="changing",bi=(p(Re,J),d(Re,[{key:"setAngleAndForce",value:function(e,t){this.force=Bt,this.angle=n.PI/2,e==="right"?this.angle=n.PI/2:e==="left"?this.angle=-n.PI/2:e==="random"?this.angle="random":e instanceof y?(this.angle="span",this.span=e):e&&(this.angle=e),String(t).toLowerCase()==="changing"||String(t).toLowerCase()==="chang"||String(t).toLowerCase()==="auto"?this.force=Bt:t&&(this.force=t)}},{key:"reset",value:function(e,t,i,r){this.angle=n.PI/2,this.setAngleAndForce(e,t),i&&_(Re.prototype.__proto__||Object.getPrototypeOf(Re.prototype),"reset",this).call(this,i,r)}},{key:"initialize",value:function(e){this.angle==="random"?e.data.cangle=n.randomAToB(-n.PI,n.PI):this.angle==="span"&&(e.data.cangle=this.span.getValue()),e.data.cyclone=new D(0,0)}},{key:"applyBehaviour",value:function(e,t,i){this.calculate(e,t,i),t=void 0,i=e.v.getGradient(),this.angle==="random"||this.angle==="span"?i+=e.data.cangle:i+=this.angle,t=this.force===Bt?e.v.length()/100:this.force,e.data.cyclone.x=t*Math.cos(i),e.data.cyclone.y=t*Math.sin(i),e.data.cyclone=this.normalizeForce(e.data.cyclone),e.a.add(e.data.cyclone)}}]),Re);function Re(e,t,i,r){return c(this,Re),r=v(this,(Re.__proto__||Object.getPrototypeOf(Re)).call(this,i,r)),r.setAngleAndForce(e,t),r.name="Cyclone",r}var wi=(p(Ee,Zt),d(Ee,[{key:"reset",value:function(e,t,i,r,h){_(Ee.prototype.__proto__||Object.getPrototypeOf(Ee.prototype),"reset",this).call(this,e,t,i,r,h),this.force*=-1}}]),Ee);function Ee(e,t,i,r,h){return c(this,Ee),h=v(this,(Ee.__proto__||Object.getPrototypeOf(Ee)).call(this,e,t,i,r,h)),h.force*=-1,h.name="Repulsion",h}var xi=(p(Ie,J),d(Ie,[{key:"reset",value:function(e,t,i,r){this.distanceVec=new D,this.centerPoint=m.initValue(e,new D),this.force=m.initValue(this.normalizeValue(t),100),i&&_(Ie.prototype.__proto__||Object.getPrototypeOf(Ie.prototype),"reset",this).call(this,i,r)}},{key:"initialize",value:function(){}},{key:"applyBehaviour",value:function(e,t){this.distanceVec.set(this.centerPoint.x-e.p.x,this.centerPoint.y-e.p.y);var i,r=this.distanceVec.lengthSq();r!==0&&(i=this.distanceVec.length(),i=this.force*t/(r*i),e.v.x+=i*this.distanceVec.x,e.v.y+=i*this.distanceVec.y)}}]),Ie);function Ie(e,t,i,r){return c(this,Ie),r=v(this,(Ie.__proto__||Object.getPrototypeOf(Ie)).call(this,i,r)),r.distanceVec=new D,r.centerPoint=m.initValue(e,new D),r.force=m.initValue(r.normalizeValue(t),100),r.name="GravityWell",r}var Pi={initialize:function(e,t,i){for(var r=i.length,h=void 0,h=0;h<r;h++)i[h]instanceof ve?i[h].init(e,t):this.init(e,t,i[h]);this.bindEmitter(e,t)},init:function(e,t,i){m.setProp(t,i),m.setVectorVal(t,i)},bindEmitter:function(e,t){e.bindEmitter&&(t.p.add(e.p),t.v.add(e.v),t.a.add(e.a),t.v.rotate(n.degreeTransform(e.rotation)))}},ft=(p(Ge,kt),d(Ge,[{key:"emit",value:function(e,t){this.stoped=!1,this.emitTime=0,this.totalTime=m.initValue(e,1/0),t===!0||t==="life"||t==="destroy"?this.life=e==="once"?1:this.totalTime:isNaN(t)||(this.life=t),this.rate.init()}},{key:"stop",value:function(){this.totalTime=-1,this.emitTime=0,this.stoped=!0}},{key:"preEmit",value:function(e){var t=this.stoped,i=this.emitTime,r=this.totalTime;for(this.stoped=!1,this.emitTime=0,this.totalTime=e,this.rate.init();.0167<e;)e-=.0167,this.update(.0167);this.stoped=t,this.emitTime=i+Math.max(e,0),this.totalTime=r}},{key:"removeAllParticles",value:function(){for(var e=this.particles.length;e--;)this.particles[e].dead=!0}},{key:"addSelfInitialize",value:function(e){e.init?e.init(this):this.initAll()}},{key:"addInitialize",value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];for(var r=t.length;r--;)this.initializes.push(t[r])}},{key:"removeInitialize",value:function(e){e=this.initializes.indexOf(e),-1<e&&this.initializes.splice(e,1)}},{key:"removeAllInitializers",value:function(){m.emptyArray(this.initializes)}},{key:"addBehaviour",value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];for(var r=arguments.length;r--;){var h=t[r];this.behaviours.push(h),h.parents&&h.parents.push(this)}}},{key:"removeBehaviour",value:function(e){var t=this.behaviours.indexOf(e);return this.behaviours.splice(t,1),e.parents&&(t=e.parents.indexOf(e),e.parents.splice(t,1)),t}},{key:"removeAllBehaviours",value:function(){m.emptyArray(this.behaviours)}},{key:"update",value:function(e){this.age+=e,(this.age>=this.life||this.dead)&&this.destroy(),this.emitting(e),this.integrate(e)}},{key:"integrate",value:function(e){if(this.parent){var t=1-this.damping;this.parent.integrator.calculate(this,e,t);for(var r=void 0,i=void 0,r=this.particles.length-1;0<=r;r--)(i=this.particles[r]).update(e,r),this.parent.integrator.calculate(i,e,t),this.dispatch("PARTICLE_UPDATE",i),i.dead&&(this.dispatch("PARTICLE_DEAD",i),this.parent.pool.expire(i),this.particles.splice(r,1))}}},{key:"dispatch",value:function(e,t){this.parent&&this.parent.dispatchEvent(e,t),this.bindEvent&&this.dispatchEvent(e,t)}},{key:"emitting",value:function(e){if(this.totalTime==="once"){var t=void 0,i=this.rate.getValue(99999);for(0<i&&(this.emitSpeed=i),t=0;t<i;t++)this.createParticle();this.totalTime="none"}else if(this.emitTime+=e,this.emitTime<this.totalTime){var r=this.rate.getValue(e),h=void 0;for(0<r&&(this.emitSpeed=r),h=0;h<r;h++)this.createParticle()}}},{key:"createParticle",value:function(e,t){var i=this.parent.pool.get(kt);return this.setupParticle(i,e,t),this.dispatch("PARTICLE_CREATED",i),i}},{key:"setupParticle",value:function(e,t,i){var r=this.initializes,h=this.behaviours;t&&(r=m.toArray(t)),i&&(h=m.toArray(i)),e.reset(),Pi.initialize(this,e,r),e.addBehaviours(h),(e.parent=this).particles.push(e)}},{key:"remove",value:function(){this.stop(),m.destroyAll(this.particles)}},{key:"destroy",value:function(){this.dead=!0,this.remove(),this.removeAllInitializers(),this.removeAllBehaviours(),this.parent&&this.parent.removeEmitter(this)}}]),Ge);function Ge(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return c(this,Ge),e=v(this,(Ge.__proto__||Object.getPrototypeOf(Ge)).call(this,e)),e.particles=[],e.behaviours=[],e.initializes=[],e.emitTime=0,e.emitSpeed=0,e.totalTime=-1,e.damping=.006,e.bindEmitter=!0,e.rate=new jt(1,.1),e.name="Emitter",e.id=X.id(e.name),e}De.bind(ft);var ki=(p(Ae,ft),d(Ae,[{key:"addSelfBehaviour",value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];for(var h=void 0,r=t.length,h=0;h<r;h++){var f=t[h];this.selfBehaviours.push(f),f.initialize(this)}}},{key:"removeSelfBehaviour",value:function(e){e=this.selfBehaviours.indexOf(e),-1<e&&this.selfBehaviours.splice(e,1)}},{key:"update",value:function(e){if(_(Ae.prototype.__proto__||Object.getPrototypeOf(Ae.prototype),"update",this).call(this,e),!this.sleep)for(var t=this.selfBehaviours.length,i=void 0,i=0;i<t;i++)this.selfBehaviours[i].applyBehaviour(this,e,i)}}]),Ae);function Ae(e){return c(this,Ae),e=v(this,(Ae.__proto__||Object.getPrototypeOf(Ae)).call(this,e)),e.selfBehaviours=[],e}var Ci=(p(se,ft),d(se,[{key:"initEventHandler",value:function(){var e=this;this.mousemoveHandler=function(t){return e.mousemove.call(e,t)},this.mousedownHandler=function(t){return e.mousedown.call(e,t)},this.mouseupHandler=function(t){return e.mouseup.call(e,t)},this.mouseTarget.addEventListener("mousemove",this.mousemoveHandler,!1)}},{key:"emit",value:function(){this._allowEmitting=!0}},{key:"stop",value:function(){this._allowEmitting=!1}},{key:"mousemove",value:function(e){e.layerX||e.layerX===0?(this.p.x+=(e.layerX-this.p.x)*this.ease,this.p.y+=(e.layerY-this.p.y)*this.ease):!e.offsetX&&e.offsetX!==0||(this.p.x+=(e.offsetX-this.p.x)*this.ease,this.p.y+=(e.offsetY-this.p.y)*this.ease),this._allowEmitting&&_(se.prototype.__proto__||Object.getPrototypeOf(se.prototype),"emit",this).call(this,"once")}},{key:"destroy",value:function(){_(se.prototype.__proto__||Object.getPrototypeOf(se.prototype),"destroy",this).call(this),this.mouseTarget.removeEventListener("mousemove",this.mousemoveHandler,!1)}}]),se);function se(e,t,i){return c(this,se),i=v(this,(se.__proto__||Object.getPrototypeOf(se)).call(this,i)),i.mouseTarget=m.initValue(e,window),i.ease=m.initValue(t,.7),i._allowEmitting=!1,i.initEventHandler(),i}var ue=(d(Tt,[{key:"setStroke",value:function(e,t){e=0<arguments.length&&e!==void 0?e:"#000000",t=1<arguments.length&&t!==void 0?t:1,this.stroke={color:e,thinkness:t}}},{key:"initHandler",value:function(){var e=this;this._protonUpdateHandler=function(){e.onProtonUpdate.call(e)},this._protonUpdateAfterHandler=function(){e.onProtonUpdateAfter.call(e)},this._emitterAddedHandler=function(t){e.onEmitterAdded.call(e,t)},this._emitterRemovedHandler=function(t){e.onEmitterRemoved.call(e,t)},this._particleCreatedHandler=function(t){e.onParticleCreated.call(e,t)},this._particleUpdateHandler=function(t){e.onParticleUpdate.call(e,t)},this._particleDeadHandler=function(t){e.onParticleDead.call(e,t)}}},{key:"init",value:function(e){(this.parent=e).addEventListener("PROTON_UPDATE",this._protonUpdateHandler),e.addEventListener("PROTON_UPDATE_AFTER",this._protonUpdateAfterHandler),e.addEventListener("EMITTER_ADDED",this._emitterAddedHandler),e.addEventListener("EMITTER_REMOVED",this._emitterRemovedHandler),e.addEventListener("PARTICLE_CREATED",this._particleCreatedHandler),e.addEventListener("PARTICLE_UPDATE",this._particleUpdateHandler),e.addEventListener("PARTICLE_DEAD",this._particleDeadHandler)}},{key:"resize",value:function(){}},{key:"destroy",value:function(){this.remove()}},{key:"remove",value:function(){this.parent.removeEventListener("PROTON_UPDATE",this._protonUpdateHandler),this.parent.removeEventListener("PROTON_UPDATE_AFTER",this._protonUpdateAfterHandler),this.parent.removeEventListener("EMITTER_ADDED",this._emitterAddedHandler),this.parent.removeEventListener("EMITTER_REMOVED",this._emitterRemovedHandler),this.parent.removeEventListener("PARTICLE_CREATED",this._particleCreatedHandler),this.parent.removeEventListener("PARTICLE_UPDATE",this._particleUpdateHandler),this.parent.removeEventListener("PARTICLE_DEAD",this._particleDeadHandler),this.parent=null}},{key:"onProtonUpdate",value:function(){}},{key:"onProtonUpdateAfter",value:function(){}},{key:"onEmitterAdded",value:function(){}},{key:"onEmitterRemoved",value:function(){}},{key:"onParticleCreated",value:function(){}},{key:"onParticleUpdate",value:function(){}},{key:"onParticleDead",value:function(){}}]),Tt);function Tt(e,t){c(this,Tt),this.pool=new pe,this.element=e,this.stroke=t,this.circleConf={isCircle:!0},this.initHandler(),this.name="BaseRenderer"}var Ri=(p(Xe,ue),d(Xe,[{key:"resize",value:function(e,t){this.element.width=e,this.element.height=t}},{key:"onProtonUpdate",value:function(){this.context.clearRect(0,0,this.element.width,this.element.height)}},{key:"onParticleCreated",value:function(e){e.body?L(e.body,this.addImg2Body,e):e.color=e.color||"#ff0000"}},{key:"onParticleUpdate",value:function(e){e.body?e.body instanceof Image&&this.drawImage(e):this.drawCircle(e)}},{key:"onParticleDead",value:function(e){e.body=null}},{key:"addImg2Body",value:function(e,t){t.body=e}},{key:"drawImage",value:function(e){var t,i=e.body.width*e.scale|0,r=e.body.height*e.scale|0,h=e.p.x-i/2,f=e.p.y-r/2;e.color?(e.data.buffer||(e.data.buffer=this.createBuffer(e.body)),(t=e.data.buffer.getContext("2d")).clearRect(0,0,e.data.buffer.width,e.data.buffer.height),t.globalAlpha=e.alpha,t.drawImage(e.body,0,0),t.globalCompositeOperation="source-atop",t.fillStyle=Ve.rgbToHex(e.rgb),t.fillRect(0,0,e.data.buffer.width,e.data.buffer.height),t.globalCompositeOperation="source-over",t.globalAlpha=1,this.context.drawImage(e.data.buffer,0,0,e.data.buffer.width,e.data.buffer.height,h,f,i,r)):(this.context.save(),this.context.globalAlpha=e.alpha,this.context.translate(e.p.x,e.p.y),this.context.rotate(n.degreeTransform(e.rotation)),this.context.translate(-e.p.x,-e.p.y),this.context.drawImage(e.body,0,0,e.body.width,e.body.height,h,f,i,r),this.context.globalAlpha=1,this.context.restore())}},{key:"drawCircle",value:function(e){e.rgb?this.context.fillStyle="rgba("+e.rgb.r+","+e.rgb.g+","+e.rgb.b+","+e.alpha+")":this.context.fillStyle=e.color,this.context.beginPath(),this.context.arc(e.p.x,e.p.y,e.radius,0,2*Math.PI,!0),this.stroke&&(this.context.strokeStyle=this.stroke.color,this.context.lineWidth=this.stroke.thinkness,this.context.stroke()),this.context.closePath(),this.context.fill()}},{key:"createBuffer",value:function(e){if(e instanceof Image){var t=e.width+"_"+e.height,i=this.bufferCache[t];return i||((i=document.createElement("canvas")).width=e.width,i.height=e.height,this.bufferCache[t]=i),i}}}]),Xe);function Xe(e){return c(this,Xe),e=v(this,(Xe.__proto__||Object.getPrototypeOf(Xe)).call(this,e)),e.stroke=null,e.context=e.element.getContext("2d"),e.bufferCache={},e.name="CanvasRenderer",e}var Ei=(p(Ye,ue),d(Ye,[{key:"onParticleCreated",value:function(e){e.body?L(e.body,this.addImg2Body,e):(e.body=this.pool.get(this.circleConf,e),this.element.appendChild(e.body))}},{key:"onParticleUpdate",value:function(e){this.bodyReady(e)&&(this.transform3d?O.transform3d(e.body,e.p.x,e.p.y,e.scale,e.rotation):O.transform(e.body,e.p.x,e.p.y,e.scale,e.rotation),e.body.style.opacity=e.alpha,e.body.isCircle&&(e.body.style.backgroundColor=e.color||"#ff0000"))}},{key:"onParticleDead",value:function(e){this.bodyReady(e)&&(this.element.removeChild(e.body),this.pool.expire(e.body),e.body=null)}},{key:"bodyReady",value:function(e){return u(e.body)==="object"&&e.body&&!e.body.isInner}},{key:"addImg2Body",value:function(e,t){t.dead||(t.body=this.pool.get(e,t),O.resize(t.body,e.width,e.height),this.element.appendChild(t.body))}},{key:"createBody",value:function(e,t){return e.isCircle?this.createCircle(t):this.createSprite(e,t)}},{key:"createCircle",value:function(e){var t=O.createDiv(e.id+"_dom",2*e.radius,2*e.radius);return t.style.borderRadius=e.radius+"px",this.stroke&&(t.style.borderColor=this.stroke.color,t.style.borderWidth=this.stroke.thinkness+"px"),t.isCircle=!0,t}},{key:"createSprite",value:function(r,t){var i=typeof r=="string"?r:r.src,r=O.createDiv(t.id+"_dom",r.width,r.height);return r.style.backgroundImage="url("+i+")",r}}]),Ye);function Ye(e){c(this,Ye);var t=v(this,(Ye.__proto__||Object.getPrototypeOf(Ye)).call(this,e));return t.stroke=null,t.pool.create=function(i,r){return t.createBody(i,r)},t.addImg2Body=t.addImg2Body.bind(t),t.transform3d=!1,t.name="DomRenderer",t}var Ii=(p(We,ue),d(We,[{key:"onParticleCreated",value:function(e){e.body?this.createSprite(e):this.createCircle(e),this.element.addChild(e.body)}},{key:"onParticleUpdate",value:function(e){e.body&&(e.body.x=e.p.x,e.body.y=e.p.y,e.body.alpha=e.alpha,e.body.scaleX=e.body.scaleY=e.scale,e.body.rotation=e.rotation)}},{key:"onParticleDead",value:function(e){e.body&&(e.body.parent&&e.body.parent.removeChild(e.body),this.pool.expire(e.body),e.body=null),e.graphics&&this.pool.expire(e.graphics)}},{key:"createSprite",value:function(e){e.body=this.pool.get(e.body),e.body.parent||e.body.image&&(e.body.regX=e.body.image.width/2,e.body.regY=e.body.image.height/2)}},{key:"createCircle",value:function(e){var t=this.pool.get(createjs.Graphics);this.stroke&&(this.stroke instanceof String?t.beginStroke(this.stroke):t.beginStroke("#000000")),t.beginFill(e.color||"#ff0000").drawCircle(0,0,e.radius);var i=this.pool.get(createjs.Shape,[t]);e.body=i,e.graphics=t}}]),We);function We(e,t){return c(this,We),e=v(this,(We.__proto__||Object.getPrototypeOf(We)).call(this,e)),e.stroke=t,e.name="EaselRenderer",e}var Ai=(p(Qe,ue),d(Qe,[{key:"resize",value:function(e,t){this.element.width=e,this.element.height=t}},{key:"createImageData",value:function(e){this.rectangle=e||new Ut(0,0,this.element.width,this.element.height),this.imageData=this.context.createImageData(this.rectangle.width,this.rectangle.height),this.context.putImageData(this.imageData,this.rectangle.x,this.rectangle.y)}},{key:"onProtonUpdate",value:function(){this.context.clearRect(this.rectangle.x,this.rectangle.y,this.rectangle.width,this.rectangle.height),this.imageData=this.context.getImageData(this.rectangle.x,this.rectangle.y,this.rectangle.width,this.rectangle.height)}},{key:"onProtonUpdateAfter",value:function(){this.context.putImageData(this.imageData,this.rectangle.x,this.rectangle.y)}},{key:"onParticleCreated",value:function(){}},{key:"onParticleUpdate",value:function(e){this.imageData&&this.setPixel(this.imageData,Math.floor(e.p.x-this.rectangle.x),Math.floor(e.p.y-this.rectangle.y),e)}},{key:"setPixel",value:function(e,t,i,r){var h=r.rgb;t<0||t>this.element.width||i<0||i>this.elementwidth||(t=4*((i>>0)*e.width+(t>>0)),e.data[t]=h.r,e.data[1+t]=h.g,e.data[2+t]=h.b,e.data[3+t]=255*r.alpha)}},{key:"onParticleDead",value:function(){}}]),Qe);function Qe(e,t){return c(this,Qe),e=v(this,(Qe.__proto__||Object.getPrototypeOf(Qe)).call(this,e)),e.context=e.element.getContext("2d"),e.imageData=null,e.rectangle=null,e.rectangle=t,e.createImageData(t),e.name="PixelRenderer",e}var lt=void 0,Bi=(p(Be,ue),d(Be,[{key:"setPIXI",value:function(e){try{lt=e||{Sprite:{}},this.createFromImage=lt.Sprite.from||lt.Sprite.fromImage}catch{}}},{key:"onProtonUpdate",value:function(){}},{key:"onParticleCreated",value:function(e){e.body?e.body=this.pool.get(e.body,e):e.body=this.pool.get(this.circleConf,e),this.blendMode&&(e.body.blendMode=this.blendMode),this.element.addChild(e.body)}},{key:"onParticleUpdate",value:function(e){this.transform(e,e.body),this.setColor!==!0&&this.color!==!0||(e.body.tint=Ve.getHex16FromParticle(e))}},{key:"onParticleDead",value:function(e){this.element.removeChild(e.body),this.pool.expire(e.body),e.body=null}},{key:"destroy",value:function(e){_(Be.prototype.__proto__||Object.getPrototypeOf(Be.prototype),"destroy",this).call(this),this.pool.destroy();for(var t=e.length;t--;){var i=e[t];i.body&&this.element.removeChild(i.body)}}},{key:"transform",value:function(e,t){t.x=e.p.x,t.y=e.p.y,t.alpha=e.alpha,t.scale.x=e.scale,t.scale.y=e.scale,t.rotation=e.rotation*n.PI_180}},{key:"createBody",value:function(e,t){return e.isCircle?this.createCircle(t):this.createSprite(e)}},{key:"createSprite",value:function(e){return e=e.isInner?this.createFromImage(e.src):new lt.Sprite(e),e.anchor.x=.5,e.anchor.y=.5,e}},{key:"createCircle",value:function(e){var t,i=new lt.Graphics;return this.stroke&&(t=this.stroke instanceof String?this.stroke:0,i.beginStroke(t)),i.beginFill(e.color||36077),i.drawCircle(0,0,e.radius),i.endFill(),i}}]),Be);function Be(e,t){c(this,Be);var i=v(this,(Be.__proto__||Object.getPrototypeOf(Be)).call(this,e));return i.stroke=t,i.color=!1,i.setColor=!1,i.blendMode=null,i.pool.create=function(r,h){return i.createBody(r,h)},i.setPIXI(window.PIXI),i.name="PixiRenderer",i}var Ti=(d(St,[{key:"set",value:function(e,t){t===0?ae.set(e,this.mats[0]):ae.multiply(this.mats[t-1],e,this.mats[t]),this.size=Math.max(this.size,t+1)}},{key:"push",value:function(e){this.size===0?ae.set(e,this.mats[0]):ae.multiply(this.mats[this.size-1],e,this.mats[this.size]),this.size++}},{key:"pop",value:function(){0<this.size&&this.size--}},{key:"top",value:function(){return this.mats[this.size-1]}}]),St);function St(){c(this,St),this.mats=[];for(var e=this.size=0;e<20;e++)this.mats.push(ae.create([0,0,0,0,0,0,0,0,0]))}p(Te,ue),d(Te,[{key:"init",value:function(e){_(Te.prototype.__proto__||Object.getPrototypeOf(Te.prototype),"init",this).call(this,e),this.resize(this.element.width,this.element.height)}},{key:"resize",value:function(e,t){this.umat[4]=-2,this.umat[7]=1,this.smat[0]=1/e,this.smat[4]=1/t,this.mstack.set(this.umat,0),this.mstack.set(this.smat,1),this.gl.viewport(0,0,e,t),this.element.width=e,this.element.height=t}},{key:"setMaxRadius",value:function(e){this.circleCanvasURL=this.createCircle(e)}},{key:"getVertexShader",value:function(){return["uniform vec2 viewport;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 tMat;","varying vec2 vTextureCoord;","varying float alpha;","void main() {","vec3 v = tMat * vec3(aVertexPosition, 1.0);","gl_Position = vec4(v.x, v.y, 0, 1);","vTextureCoord = aTextureCoord;","alpha = tMat[0][2];","}"].join(`
`)}},{key:"getFragmentShader",value:function(){return["precision mediump float;","varying vec2 vTextureCoord;","varying float alpha;","uniform sampler2D uSampler;","uniform vec4 color;","uniform bool useTexture;","uniform vec3 uColor;","void main() {","vec4 textureColor = texture2D(uSampler, vTextureCoord);","gl_FragColor = textureColor * vec4(uColor, 1.0);","gl_FragColor.w *= alpha;","}"].join(`
`)}},{key:"initVar",value:function(){this.mstack=new Ti,this.umat=ae.create([2,0,1,0,-2,0,-1,1,1]),this.smat=ae.create([.01,0,1,0,.01,0,0,0,1]),this.texturebuffers={}}},{key:"blendEquation",value:function(e){this.gl.blendEquation(this.gl[e])}},{key:"blendFunc",value:function(e,t){this.gl.blendFunc(this.gl[e],this.gl[t])}},{key:"getShader",value:function(e,t,i){return i=i?e.createShader(e.FRAGMENT_SHADER):e.createShader(e.VERTEX_SHADER),e.shaderSource(i,t),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)?i:(alert(e.getShaderInfoLog(i)),null)}},{key:"initShaders",value:function(){var e=this.getShader(this.gl,this.getFragmentShader(),!0),t=this.getShader(this.gl,this.getVertexShader(),!1);this.sprogram=this.gl.createProgram(),this.gl.attachShader(this.sprogram,t),this.gl.attachShader(this.sprogram,e),this.gl.linkProgram(this.sprogram),this.gl.getProgramParameter(this.sprogram,this.gl.LINK_STATUS)||alert("Could not initialise shaders"),this.gl.useProgram(this.sprogram),this.sprogram.vpa=this.gl.getAttribLocation(this.sprogram,"aVertexPosition"),this.sprogram.tca=this.gl.getAttribLocation(this.sprogram,"aTextureCoord"),this.gl.enableVertexAttribArray(this.sprogram.tca),this.gl.enableVertexAttribArray(this.sprogram.vpa),this.sprogram.tMatUniform=this.gl.getUniformLocation(this.sprogram,"tMat"),this.sprogram.samplerUniform=this.gl.getUniformLocation(this.sprogram,"uSampler"),this.sprogram.useTex=this.gl.getUniformLocation(this.sprogram,"useTexture"),this.sprogram.color=this.gl.getUniformLocation(this.sprogram,"uColor"),this.gl.uniform1i(this.sprogram.useTex,1)}},{key:"initBuffers",value:function(){var e;this.unitIBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.unitIBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,3,1,0,2,3]),this.gl.STATIC_DRAW);for(var i=void 0,t=[],i=0;i<100;i++)t.push(i);for(e=new Uint16Array(t),this.unitI33=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.unitI33),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,e,this.gl.STATIC_DRAW),t=[],i=0;i<100;i++)t.push(i,i+1,i+2);e=new Uint16Array(t),this.stripBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.stripBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,e,this.gl.STATIC_DRAW)}},{key:"createCircle",value:function(i){this.circleCanvasRadius=T(m.initValue(i,32));var t=O.createCanvas("circle_canvas",2*this.circleCanvasRadius,2*this.circleCanvasRadius),i=t.getContext("2d");return i.beginPath(),i.arc(this.circleCanvasRadius,this.circleCanvasRadius,this.circleCanvasRadius,0,2*Math.PI,!0),i.closePath(),i.fillStyle="#FFF",i.fill(),t.toDataURL()}},{key:"drawImg2Canvas",value:function(e){var t=e.body.width,i=e.body.height,r=T(e.body.width),h=T(e.body.height),f=e.body.width/r,V=e.body.height/h;this.texturebuffers[e.data.src]||(this.texturebuffers[e.data.src]=[this.gl.createTexture(),this.gl.createBuffer(),this.gl.createBuffer()]),e.data.texture=this.texturebuffers[e.data.src][0],e.data.vcBuffer=this.texturebuffers[e.data.src][1],e.data.tcBuffer=this.texturebuffers[e.data.src][2],this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.data.tcBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,0,f,0,0,V,V,V]),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.data.vcBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,0,t,0,0,i,t,i]),this.gl.STATIC_DRAW),h=e.data.canvas.getContext("2d").getImageData(0,0,r,h),this.gl.bindTexture(this.gl.TEXTURE_2D,e.data.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,h),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_NEAREST),this.gl.generateMipmap(this.gl.TEXTURE_2D),e.data.textureLoaded=!0,e.data.textureWidth=t,e.data.textureHeight=i}},{key:"onProtonUpdate",value:function(){}},{key:"onParticleCreated",value:function(e){e.data.textureLoaded=!1,e.data.tmat=ae.create(),e.data.tmat[8]=1,e.data.imat=ae.create(),e.data.imat[8]=1,e.body?L(e.body,this.addImg2Body,e):(L(this.circleCanvasURL,this.addImg2Body,e),e.data.oldScale=e.radius/this.circleCanvasRadius)}},{key:"addImg2Body",value:function(e,t){t.dead||(t.body=e,t.data.src=e.src,t.data.canvas=$(e),t.data.oldScale=1,this.drawImg2Canvas(t))}},{key:"onParticleUpdate",value:function(e){e.data.textureLoaded&&(this.updateMatrix(e),this.gl.uniform3f(this.sprogram.color,e.rgb.r/255,e.rgb.g/255,e.rgb.b/255),this.gl.uniformMatrix3fv(this.sprogram.tMatUniform,!1,this.mstack.top()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.data.vcBuffer),this.gl.vertexAttribPointer(this.sprogram.vpa,2,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.data.tcBuffer),this.gl.vertexAttribPointer(this.sprogram.tca,2,this.gl.FLOAT,!1,0,0),this.gl.bindTexture(this.gl.TEXTURE_2D,e.data.texture),this.gl.uniform1i(this.sprogram.samplerUniform,0),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.unitIBuffer),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0),this.mstack.pop())}},{key:"onParticleDead",value:function(){}},{key:"updateMatrix",value:function(e){var t=q(-e.data.textureWidth/2,-e.data.textureHeight/2),i=q(e.p.x,e.p.y),h=e.rotation*n.PI_180,r=F(h),h=e.scale*e.data.oldScale,h=M(h,h),h=C(t,h),h=C(h,r);h=C(h,i),ae.inverse(h,e.data.imat),h[2]=e.alpha,this.mstack.push(h)}}]),De=Te;function Te(e){return c(this,Te),e=v(this,(Te.__proto__||Object.getPrototypeOf(Te)).call(this,e)),e.gl=e.element.getContext("experimental-webgl",{antialias:!0,stencil:!1,depth:!1}),e.gl||alert("Sorry your browser do not suppest WebGL!"),e.initVar(),e.setMaxRadius(),e.initShaders(),e.initBuffers(),e.gl.blendEquation(e.gl.FUNC_ADD),e.gl.blendFunc(e.gl.SRC_ALPHA,e.gl.ONE_MINUS_SRC_ALPHA),e.gl.enable(e.gl.BLEND),e.addImg2Body=e.addImg2Body.bind(e),e.name="WebGLRenderer",e}p(ht,ue),ue=ht;function ht(e){return c(this,ht),e=v(this,(ht.__proto__||Object.getPrototypeOf(ht)).call(this,e)),e.name="CustomRenderer",e}var $t=(p(Ke,Ue),d(Ke,[{key:"getPosition",value:function(){return this.random=Math.random(),this.vector.x=this.x1+this.random*this.length*Math.cos(this.gradient),this.vector.y=this.y1+this.random*this.length*Math.sin(this.gradient),this.vector}},{key:"getDirection",value:function(e,t){var i=this.dy,r=-this.dx;return 0<(i*e+r*t+this.dot)*(r==0?1:r)}},{key:"getDistance",value:function(e,t){return(this.dy*e+-this.dx*t+this.dot)/Math.sqrt(this.xxyy)}},{key:"getSymmetric",value:function(e){var r=e.getGradient(),t=2*(this.getGradient()-r),i=e.x,r=e.y;return e.x=i*Math.cos(t)-r*Math.sin(t),e.y=i*Math.sin(t)+r*Math.cos(t),e}},{key:"getGradient",value:function(){return Math.atan2(this.dy,this.dx)}},{key:"rangeOut",value:function(e){if(Math.abs(this.getGradient())<=n.PI/4){if(e.p.x<=this.maxx&&e.p.x>=this.minx)return!0}else if(e.p.y<=this.maxy&&e.p.y>=this.miny)return!0;return!1}},{key:"getLength",value:function(){return Math.sqrt(this.dx*this.dx+this.dy*this.dy)}},{key:"crossing",value:function(e){this.crossType==="dead"?this.direction===">"||this.direction==="R"||this.direction==="right"||this.direction==="down"?this.rangeOut(e)&&this.getDirection(e.p.x,e.p.y)&&(e.dead=!0):this.rangeOut(e)&&(this.getDirection(e.p.x,e.p.y)||(e.dead=!0)):this.crossType==="bound"?this.rangeOut(e)&&this.getDistance(e.p.x,e.p.y)<=e.radius&&(this.dx===0?e.v.x*=-1:this.dy===0?e.v.y*=-1:this.getSymmetric(e.v)):this.crossType==="cross"&&this.alert&&(console.error("Sorry, LineZone does not support cross method!"),this.alert=!1)}}]),Ke);function Ke(e,t,i,r,h){c(this,Ke);var f=v(this,(Ke.__proto__||Object.getPrototypeOf(Ke)).call(this));return 0<=i-e?(f.x1=e,f.y1=t,f.x2=i,f.y2=r):(f.x1=i,f.y1=r,f.x2=e,f.y2=t),f.dx=f.x2-f.x1,f.dy=f.y2-f.y1,f.minx=Math.min(f.x1,f.x2),f.miny=Math.min(f.y1,f.y2),f.maxx=Math.max(f.x1,f.x2),f.maxy=Math.max(f.y1,f.y2),f.dot=f.x2*f.y1-f.x1*f.y2,f.xxyy=f.dx*f.dx+f.dy*f.dy,f.gradient=f.getGradient(),f.length=f.getLength(),f.direction=m.initValue(h,">"),f}var Ht=(p(Je,Ue),d(Je,[{key:"getPosition",value:function(){return this.angle=n.PIx2*Math.random(),this.randomRadius=Math.random()*this.radius,this.vector.x=this.x+this.randomRadius*Math.cos(this.angle),this.vector.y=this.y+this.randomRadius*Math.sin(this.angle),this.vector}},{key:"setCenter",value:function(e,t){this.center.x=e,this.center.y=t}},{key:"crossing",value:function(e){var t=e.p.distanceTo(this.center);this.crossType==="dead"?t-e.radius>this.radius&&(e.dead=!0):this.crossType==="bound"?t+e.radius>=this.radius&&this.getSymmetric(e):this.crossType==="cross"&&this.alert&&(console.error("Sorry, CircleZone does not support cross method!"),this.alert=!1)}},{key:"getSymmetric",value:function(e){var r=e.v.getGradient(),t=2*(this.getGradient(e)-r),i=e.v.x,r=e.v.y;e.v.x=i*Math.cos(t)-r*Math.sin(t),e.v.y=i*Math.sin(t)+r*Math.cos(t)}},{key:"getGradient",value:function(e){return-n.PI_2+Math.atan2(e.p.y-this.center.y,e.p.x-this.center.x)}}]),Je);function Je(e,t,i){c(this,Je);var r=v(this,(Je.__proto__||Object.getPrototypeOf(Je)).call(this));return r.x=e,r.y=t,r.radius=i,r.angle=0,r.center={x:e,y:t},r}var qt=(p(et,Ue),d(et,[{key:"getPosition",value:function(){return this.vector.x=this.x+Math.random()*this.width,this.vector.y=this.y+Math.random()*this.height,this.vector}},{key:"crossing",value:function(e){this.crossType==="dead"?((e.p.x+e.radius<this.x||e.p.x-e.radius>this.x+this.width)&&(e.dead=!0),(e.p.y+e.radius<this.y||e.p.y-e.radius>this.y+this.height)&&(e.dead=!0)):this.crossType==="bound"?(e.p.x-e.radius<this.x?(e.p.x=this.x+e.radius,e.v.x*=-1):e.p.x+e.radius>this.x+this.width&&(e.p.x=this.x+this.width-e.radius,e.v.x*=-1),e.p.y-e.radius<this.y?(e.p.y=this.y+e.radius,e.v.y*=-1):e.p.y+e.radius>this.y+this.height&&(e.p.y=this.y+this.height-e.radius,e.v.y*=-1)):this.crossType==="cross"&&(e.p.x+e.radius<this.x&&e.v.x<=0?e.p.x=this.x+this.width+e.radius:e.p.x-e.radius>this.x+this.width&&0<=e.v.x&&(e.p.x=this.x-e.radius),e.p.y+e.radius<this.y&&e.v.y<=0?e.p.y=this.y+this.height+e.radius:e.p.y-e.radius>this.y+this.height&&0<=e.v.y&&(e.p.y=this.y-e.radius))}}]),et);function et(e,t,i,r){c(this,et);var h=v(this,(et.__proto__||Object.getPrototypeOf(et)).call(this));return h.x=e,h.y=t,h.width=i,h.height=r,h}p(tt,Ue),d(tt,[{key:"reset",value:function(e,t,i,r){this.imageData=e,this.x=m.initValue(t,0),this.y=m.initValue(i,0),this.d=m.initValue(r,2),this.vectors=[],this.setVectors()}},{key:"setVectors",value:function(){for(var r=void 0,e=void 0,t=this.imageData.width,i=this.imageData.height,r=0;r<t;r+=this.d)for(e=0;e<i;e+=this.d){var h=4*((e>>0)*t+(r>>0));0<this.imageData.data[3+h]&&this.vectors.push({x:r+this.x,y:e+this.y})}return this.vector}},{key:"getBound",value:function(e,t){return e=4*((t>>0)*this.imageData.width+(e>>0)),0<this.imageData.data[3+e]}},{key:"getPosition",value:function(){var e=m.getRandFromArray(this.vectors);return this.vector.copy(e)}},{key:"getColor",value:function(e,t){return e-=this.x,e=4*(((t-=this.y)>>0)*this.imageData.width+(e>>0)),{r:this.imageData.data[e],g:this.imageData.data[1+e],b:this.imageData.data[2+e],a:this.imageData.data[3+e]}}},{key:"crossing",value:function(e){this.crossType==="dead"?this.getBound(e.p.x-this.x,e.p.y-this.y)?e.dead=!0:e.dead=!1:this.crossType==="bound"&&(this.getBound(e.p.x-this.x,e.p.y-this.y)||e.v.negate())}}]),p=tt;function tt(e,t,i,r){c(this,tt);var h=v(this,(tt.__proto__||Object.getPrototypeOf(tt)).call(this));return h.reset(e,t,i,r),h}return d={addEventListener:function(e,t){e.addEventListener("PROTON_UPDATE_AFTER",function(){return t()})},getStyle:function(e){return e=Ve.hexToRgb(0<arguments.length&&e!==void 0?e:"#ff0000"),"rgba("+e.r+", "+e.g+", "+e.b+", 0.5)"},drawZone:function(e,t,i,r){var h=t.getContext("2d"),f=this.getStyle();this.addEventListener(e,function(){r&&h.clearRect(0,0,t.width,t.height),i instanceof dt?(h.beginPath(),h.fillStyle=f,h.arc(i.x,i.y,10,0,2*Math.PI,!0),h.fill(),h.closePath()):i instanceof $t?(h.beginPath(),h.strokeStyle=f,h.moveTo(i.x1,i.y1),h.lineTo(i.x2,i.y2),h.stroke(),h.closePath()):i instanceof qt?(h.beginPath(),h.strokeStyle=f,h.drawRect(i.x,i.y,i.width,i.height),h.stroke(),h.closePath()):i instanceof Ht&&(h.beginPath(),h.strokeStyle=f,h.arc(i.x,i.y,i.radius,0,2*Math.PI,!0),h.stroke(),h.closePath())})},drawEmitter:function(e,t,i,r){var h=t.getContext("2d"),f=this.getStyle();this.addEventListener(e,function(){r&&h.clearRect(0,0,t.width,t.height),h.beginPath(),h.fillStyle=f,h.arc(i.p.x,i.p.y,10,0,2*Math.PI,!0),h.fill(),h.closePath()})}},g.Particle=kt,g.Pool=pe,g.Util=m,g.ColorUtil=Ve,g.MathUtil=n,g.Vector2D=g.Vector=D,g.Polar2D=g.Polar=Lt,g.ArraySpan=Fe,g.Rectangle=Ut,g.Rate=jt,g.ease=st,g.Span=y,g.Mat3=ae,g.getSpan=function(e,t,i){return new y(e,t,i)},g.createArraySpan=Fe.createArraySpan,g.Initialize=g.Init=ve,g.Life=g.L=ri,g.Position=g.P=si,g.Velocity=g.V=li,g.Mass=g.M=hi,g.Radius=g.R=ci,g.Body=g.B=ui,g.Behaviour=J,g.Force=g.F=Nt,g.Attraction=g.A=Zt,g.RandomDrift=g.RD=di,g.Gravity=g.G=pi,g.Collision=fi,g.CrossZone=vi,g.Alpha=gi,g.Scale=g.S=mi,g.Rotate=yi,g.Color=_i,g.Repulsion=wi,g.Cyclone=bi,g.GravityWell=xi,g.Emitter=ft,g.BehaviourEmitter=ki,g.FollowEmitter=Ci,g.Zone=Ue,g.LineZone=$t,g.CircleZone=Ht,g.PointZone=dt,g.RectZone=qt,g.ImageZone=p,g.CanvasRenderer=Ri,g.DomRenderer=Ei,g.EaselRenderer=Ii,g.PixiRenderer=Bi,g.PixelRenderer=Ai,g.WebGLRenderer=g.WebGlRenderer=De,g.CustomRenderer=ue,g.Debug=d,m.assign(g,st),g})})(ti);var Li=ti.exports;const l=Wt(Li);var ii={exports:{}};/*!
* RAFManager v0.1.0
*
* Copyright 2018-2018, ajiemath <ajiemath@gmail.com>
* Licensed under the MIT license
* http://www.opensource.org/licenses/mit-license
*
*/(function(o,a){(function(s,n){o.exports=n()})(Yt,function(){return function(){for(var s=["ms","moz","webkit","o"],n=0;n<s.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[s[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[s[n]+"CancelAnimationFrame"]||window[s[n]+"CancelRequestAnimationFrame"]}(),{timer:0,state:"stop",animations:[],add:function(s){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,u={callback:s,fps:n,n:60/n,param:arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,i:0};return this.animations.push(u),this.animations.length>=1&&this.start(),this},getIndex:function(s){for(var n=0;n<this.animations.length;n++)if(this.animations[n].callback===s)return n;return-1},remove:function(s){if(!(this.getIndex(s)<0))return this.deleteMap(s),this.animations.length===0&&this.stop(),this},deleteMap:function(s){var n=this.getIndex(s),u=this.animations[n];for(var c in u)delete u[c];this.animations.splice(n,1)},start:function(){if(this.state!=="start")return this.state="start",this.tick(),this},stop:function(){if(this.state!=="stop")return this.state="stop",cancelAnimationFrame(this.timer),this},tick:function(){var s=this;this.timer=requestAnimationFrame(function(){s.tick()});for(var n=0;n<this.animations.length;n++){var u=this.animations[n],c=u.callback,d=u.param;u.i++,u.i>=u.n&&(c(d),u.i=0)}}}})})(ii);var Ui=ii.exports;const z=Wt(Ui);var ji=function(o,a){if(!(o instanceof a))throw new TypeError("Cannot call a class as a function")},Ni=function(){function o(a,s){for(var n=0;n<s.length;n++){var u=s[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}return function(a,s,n){return s&&o(a.prototype,s),n&&o(a,n),a}}(),Zi=function(){function o(){ji(this,o),this.list=[]}return Ni(o,[{key:"add",value:function(s){this.list.push(s)}},{key:"map",value:function(s){for(var n=0;n<this.list.length;n++){var u=this.list[n];s(u)}}},{key:"findByNode",value:function(s){for(var n=0;n<this.list.length;n++){var u=this.list[n];if(u.node===s)return u}return null}},{key:"removeByNode",value:function(s){for(var n=0;n<this.list.length;n++){var u=this.list[n];if(u.node===s){this.list.splice(n,1);break}}}},{key:"removeByEmitter",value:function(s){for(var n=0;n<this.list.length;n++){var u=this.list[n];if(u.emitter===s){this.list.splice(n,1);break}}}},{key:"destroy",value:function(){for(var s=0;s<this.list.length;s++){var n=this.list[s];for(var u in n)delete n[u]}this.list.length=0}}]),o}(),zt=void 0,Me=void 0,at=new Zi,ot={container:null,make:function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};typeof a=="string"&&(a=document.querySelector(a)),zt||(zt=Gi()),Me||(Me=new l,Me.addRenderer(Hi(zt)),z.add(Gt));var n=$i(a,s);return Me.addEmitter(n),qi(a),at.add({emitter:n,node:a,config:s}),this},close:function(a){typeof a=="string"&&(a=document.querySelector(a));var s=at.findByNode(a),n=s.emitter;return Me.removeEmitter(n),at.removeByNode(a),Xt(a),this},destroy:function(){try{at.map(function(a){var s=a.node;return Xt(s)}),at.destroy(),z.remove(Gt),Me.destroy()}catch{}return this}},$i=function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=new l.Emitter;n.rate=s.num?new l.Rate(l.getSpan(Math.floor(s.num*.7),s.num),.1):new l.Rate(l.getSpan(6,8),.1);var u=s.life?new l.Life(s.life):new l.Life(.5,1.2),c=s.color||Xi(a),d=s.tha?new l.Span(s.tha[0],s.tha[1]):new l.Span(-30,30),b=s.v?new l.Span(s.v*.8,s.v):new l.Span(.6,1.2);if(s.alpha?Array.isArray(s.alpha)?n.addBehaviour(new l.Alpha(s.alpha[0],s.alpha[1])):n.addBehaviour(new l.Alpha(s.alpha)):n.addBehaviour(new l.Alpha(l.getSpan(.6,.9))),s.radius){var _=s.radius,p=new l.Radius(_*.5,_);n.addInitialize(p)}else{var v=new l.Radius(1,2);n.addInitialize(v)}var y=s.g||2.5;return s.random&&n.addBehaviour(new l.RandomDrift(s.random,s.random,.2)),n.addInitialize(new l.Mass(1)),n.addInitialize(u),n.addInitialize(new l.Velocity(b,d,"polar")),n.addBehaviour(new l.Color(c)),n.addBehaviour(new l.Scale(1,.5)),n.addBehaviour(new l.G(parseFloat(y))),n},Hi=function(a,s){var n=new l.DomRenderer(a);return n.onParticleCreated=function(u){var c=n.pool.get(n.circleConf,u);c.style.width=2*u.radius+"px",c.style.height=2*u.radius+"px",c.style.marginLeft=-u.radius+"px",c.style.marginTop=-u.radius+"px",c.style.borderRadius=0,n.element.appendChild(c),u.body=c},n},Gt=function(){Me&&Me.update()},qi=function(a){a.addEventListener("input",ni,!1)},Xt=function(a){try{a.removeEventListener("input",ni,!1),a.onpropertychange=null}catch{}},ni=function(a){var s=at.findByNode(a.currentTarget||a.target),n=s.emitter,u=s.config,c=Ki(a);n.p.x=c.x,n.p.y=c.y+(u.height||u.y||0),n.emit("once")},Gi=function(){var a=document.createElement("div");return a.style.position="fixed",a.style.left="0px",a.style.top="0px",a.style.zIndex=9999,a.pointerEvents="none",a.id="powerinput_"+(Math.random()*999999>>0),document.body.appendChild(a),a},Xi=function(a){var s=a.style.color;if(!(s&&s!=="inherit")){var n=getComputedStyle(a);s=n.color,s&&s!=="inherit"||(s="#000000")}return s.indexOf("rgb")===0&&(s=Yi(s)),s},Yi=function(a){var s=a.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),n=+s[0],u=+s[1],c=+s[2];return"#"+((1<<24)+(n<<16)+(u<<8)+c).toString(16).slice(1)},Wi=function(a,s){var n=document.createElement("div");n.style.position="absolute",n.style.zIndex=-99,n.style.visibility="hidden";var u=document.createElement("div"),c=getComputedStyle(a),d=!0,b=!1,_=void 0;try{for(var p=c[Symbol.iterator](),v;!(d=(v=p.next()).done);d=!0){var y=v.value;u.style[y]=c[y]}}catch(S){b=!0,_=S}finally{try{!d&&p.return&&p.return()}finally{if(b)throw _}}var B=".",T=a.tagName==="INPUT"?a.value.replace(/ /g,B):a.value,q=T.substr(0,s);u.textContent=q,a.tagName==="TEXTAREA"&&(u.style.height="auto"),a.tagName==="INPUT"&&(u.style.width="auto");var F=document.createElement("span");F.textContent=T.substr(s)||".",F.style.backgroundColor="#ff0000",u.appendChild(F),n.appendChild(u),document.body.appendChild(n);var M=F.offsetLeft,C=F.offsetTop,O=Qi(a);return document.body.removeChild(n),{x:O.x+M,y:O.y+C}},Qi=function(a){for(var s=0,n=0;a;)s+=a.offsetLeft-a.scrollLeft+a.clientLeft,n+=a.offsetTop-a.scrollTop+a.clientTop,a=a.offsetParent;return{x:s,y:n}},Ki=function(a){var s=a.currentTarget,n=Ji(s),u=n.end;return Wi(s,u)},Ji=function(a){var s=0,n=0,u=void 0,c=void 0,d=void 0,b=void 0,_=void 0;return typeof a.selectionStart=="number"&&typeof a.selectionEnd=="number"?(s=a.selectionStart,n=a.selectionEnd):document.selection?(c=document.selection.createRange(),c&&c.parentElement()==a&&(b=a.value.length,u=a.value.replace(/\r\n/g,`
`),d=a.createTextRange(),d.moveToBookmark(c.getBookmark()),_=a.createTextRange(),_.collapse(!1),d.compareEndPoints("StartToEnd",_)>-1?s=n=b:(s=-d.moveStart("character",-b),s+=u.slice(0,s).split(`
`).length-1,d.compareEndPoints("EndToEnd",_)>-1?n=b:(n=-d.moveEnd("character",-b),n+=u.slice(0,n).split(`
`).length-1)))):s=n=a.value.length,{start:s,end:n}};const en=o=>(yt("data-v-f5d2cb99"),o=o(),_t(),o),tn={class:"flex items-center justify-center flex-col mb-[30px]"},nn=["src"],an=en(()=>k("div",{class:"enter-x-right"},[k("h4",{class:"font-bold text-[18px]"},"账号登录"),k("p",{class:"my-5 text-[#8c8c8c]"},"请输入您的邮箱和密码登录")],-1)),on={class:""},rn=mt({__name:"Login",emits:["register","forgotPassword"],setup(o,{emit:a}){window._config.title;const s=vt(),{getConfig:n}=Si(s);Dt(()=>{const v={height:5,tha:[0,360],g:.5,num:5,radius:6,circle:!0,alpha:[.75,.1],color:"random"};ot.make(".obinput",v);const y=document.querySelector(".obpassinput");y&&ot.make(y.children[0],v)});const u=Vt({email:"",password:""}),c=K(!1);async function d(){try{c.value=!0;const v=await Qt(u);s.setUser(v.data),s.setToken(v.data.auth_data),c.value=!1,await gt.push("/")}catch{c.value=!1}}const b=a;function _(){b("register")}function p(){b("forgotPassword")}return(v,y)=>{const B=R("a-input"),T=R("a-form-item"),q=R("a-input-password"),F=R("a-button"),M=R("a-form");return A(),oe("div",null,[k("div",tn,[he(n).logo?(A(),oe("img",{key:0,src:he(n).logo,class:"w-[80px] rounded-md"},null,8,nn)):de("",!0)]),an,k("div",on,[w(M,{layout:"vertical",model:u},{default:E(()=>[w(T,{label:"邮箱",class:"enter-x-right"},{default:E(()=>[w(B,{value:u.email,"onUpdate:value":y[0]||(y[0]=C=>u.email=C),size:"large",class:"obinput",placeholder:"邮箱"},null,8,["value"])]),_:1}),w(T,{label:"密码",class:"enter-x-right"},{default:E(()=>[w(q,{value:u.password,"onUpdate:value":y[1]||(y[1]=C=>u.password=C),size:"large",class:"obpassinput",placeholder:"密码"},null,8,["value"])]),_:1}),w(T,{class:"enter-x-right"},{default:E(()=>[w(F,{type:"primary",loading:c.value,class:"w-full",size:"large",onClick:d},{default:E(()=>[ze("登录")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),k("div",{class:"flex items-center justify-between enter-x-right"},[k("div",{class:"font-medium"},[ze("还没账号？"),k("span",{class:"text-theme cursor-pointer animated-div relative",onClick:_},"立即注册 ")]),k("span",{class:"text-theme font-medium cursor-pointer animated-div relative pb-1",onClick:p},"忘记密码")])])}}});const sn=H(rn,[["__scopeId","data-v-f5d2cb99"]]),Ft=o=>(yt("data-v-1b9aed99"),o=o(),_t(),o),ln=Ft(()=>k("div",{class:"enter-x-right"},[k("h4",{class:"font-bold text-[24px]"},"加入我们"),k("p",{class:"my-5 text-[#8c8c8c]"},"输入您的邮箱和密码进行注册")],-1)),hn={class:""},cn={key:0,class:"text-[12px]"},un={key:1,class:"text-[12px]"},dn=Ft(()=>k("span",{class:"text-[12px]"},"我已阅读并同意",-1)),pn=["href"],fn=Ft(()=>k("span",{class:"text-[12px] text-theme animated-div relative cursor-pointer"},"服务条款",-1)),vn=[fn],gn={class:"flex items-center justify-center",style:{"min-height":"78px"}},mn=mt({__name:"Register",emits:["login"],setup(o,{emit:a}){const s=()=>document.body;Dt(()=>{const P={height:5,tha:[0,360],g:.5,num:5,radius:6,circle:!0,alpha:[.75,.1],color:"random"},x=document.getElementsByClassName("obinput");for(let $=0;$<x.length;$++)ot.make(x[$],P);const L=document.getElementsByClassName("obpassinput");for(let $=0;$<L.length;$++)ot.make(L[$].children[0],P)});const n=Vt({email_code:"",email:"",invite_code:gt.currentRoute.value.query.code||"",password:"",_password:""}),u=a;function c(){u("login")}const d=K(60);let b;const _=K(!1),p=K(!1),v=K(!1),{getConfig:y}=vt(),B=K("");y.email_whitelist_suffix&&y.email_whitelist_suffix.length>0&&(B.value=y.email_whitelist_suffix[0]);let T=!1;function q(){if(!n.email)return U.error("请填写邮箱");if(y.is_email_verify&&!n.email_code)return U.error("请填写验证码");if(!n.password)return U.error("请填写密码");if(y.is_invite_force&&!n.invite_code)return U.error("请填写邀请码");if(n.password!=n._password)return U.error("两次密码不一致");if(!v.value)return U.error("请勾选服务条款");T=!0,y.is_recaptcha?p.value=!0:O()}async function F(P){let x;y.email_whitelist_suffix&&y.email_whitelist_suffix.length>0?x=n.email+"@"+B.value:x=n.email,await ei({email:x,recaptcha_data:P}),U.success("发送成功")}async function M(P){_.value||(await F(P),_.value=!0,b&&(clearInterval(b),b=null),b=setInterval(()=>{d.value--,d.value<=0&&(b&&clearInterval(b),_.value=!1,d.value=60)},1e3))}Kt(()=>{b&&(clearInterval(b),b=null)});const C=K(!1);async function O(P){try{C.value=!0;let x;y.email_whitelist_suffix&&y.email_whitelist_suffix.length>0?x=n.email+"@"+B.value:x=n.email,await Oi({email:x,email_code:n.email_code,invite_code:n.invite_code,password:n.password,recaptcha_data:P}),U.success("注册成功");const L=await Qt({email:x,password:n.password}),{setUser:$,setToken:m}=vt();$(L.data),m(L.data.auth_data),C.value=!1,await gt.push("/")}catch(x){C.value=!1,console.log(x)}}const S=P=>{p.value=!1,T?O(P):M(P)};function ne(){if(T=!1,n.email){if(/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test(n.email)){if(y.email_whitelist_suffix&&y.email_whitelist_suffix.length>0){U.error("多余的邮箱后缀");return}}else if(!(y.email_whitelist_suffix&&y.email_whitelist_suffix.length>0)){U.error("邮箱格式错误");return}y.is_recaptcha?p.value=!0:M()}else U.error("请填写邮箱")}return(P,x)=>{const L=R("a-input"),$=R("a-select-option"),m=R("a-select"),ce=R("a-input-group"),X=R("a-form-item"),pe=R("a-button"),Oe=R("a-input-password"),wt=R("a-checkbox"),rt=R("a-form"),De=R("a-modal");return A(),oe("div",null,[ln,k("div",hn,[w(rt,{layout:"vertical",model:n},{default:E(()=>[w(X,{label:"邮箱",class:"enter-x-right"},{default:E(()=>[he(y).email_whitelist_suffix&&he(y).email_whitelist_suffix.length>0?(A(),j(ce,{key:0,compact:""},{default:E(()=>[w(L,{style:{width:"62%"},size:"large",placeholder:"邮箱",class:"obinput",value:n.email,"onUpdate:value":x[0]||(x[0]=I=>n.email=I)},null,8,["value"]),w(m,{value:B.value,"onUpdate:value":x[1]||(x[1]=I=>B.value=I),style:{width:"38%"},size:"large",getPopupContainer:s},{default:E(()=>[(A(!0),oe(Mi,null,zi(he(y).email_whitelist_suffix,I=>(A(),j($,{key:I,value:I},{default:E(()=>[ze("@"+Ot(I),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})):(A(),j(L,{key:1,value:n.email,"onUpdate:value":x[2]||(x[2]=I=>n.email=I),size:"large",class:"obinput",placeholder:"请输入您的邮箱"},null,8,["value"]))]),_:1}),he(y).is_email_verify?(A(),j(X,{key:0,label:"验证码",class:"enter-x-right"},{default:E(()=>[w(ce,{compact:""},{default:E(()=>[w(L,{style:{width:"62%"},value:n.email_code,"onUpdate:value":x[3]||(x[3]=I=>n.email_code=I),size:"large",class:"obinput",placeholder:"验证码"},null,8,["value"]),w(pe,{style:{width:"38%"},size:"large",class:"send_button",disabled:_.value,onClick:ne},{default:E(()=>[_.value?de("",!0):(A(),oe("span",cn,"发送验证码")),_.value?(A(),oe("span",un,Ot(d.value)+"s",1)):de("",!0)]),_:1},8,["disabled"])]),_:1})]),_:1})):de("",!0),w(X,{label:"密码",class:"enter-x-right"},{default:E(()=>[w(Oe,{value:n.password,"onUpdate:value":x[4]||(x[4]=I=>n.password=I),size:"large",placeholder:"密码",class:"obpassinput"},null,8,["value"])]),_:1}),w(X,{label:"确认密码",class:"enter-x-right"},{default:E(()=>[w(Oe,{value:n._password,"onUpdate:value":x[5]||(x[5]=I=>n._password=I),size:"large",placeholder:"确认密码",class:"obpassinput"},null,8,["value"])]),_:1}),w(X,{label:"邀请码",class:"enter-x-right"},{default:E(()=>[w(L,{value:n.invite_code,"onUpdate:value":x[6]||(x[6]=I=>n.invite_code=I),size:"large",class:"obinput",placeholder:he(y).is_invite_force?"邀请码":"邀请码(选填)"},null,8,["value","placeholder"])]),_:1}),w(X,{class:"enter-x-right"},{default:E(()=>[w(wt,{checked:v.value,"onUpdate:checked":x[7]||(x[7]=I=>v.value=I)},{default:E(()=>[dn]),_:1},8,["checked"]),k("a",{href:he(y).tos_url},vn,8,pn)]),_:1}),w(X,{class:"enter-x-right"},{default:E(()=>[w(pe,{type:"primary",class:"w-full",size:"large",onClick:q,loading:C.value},{default:E(()=>[ze("立即注册 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),k("div",{class:"flex items-center justify-center enter-x-right"},[k("div",{class:"font-medium"},[ze("已经有帐户？"),k("span",{class:"text-theme cursor-pointer animated-div relative",onClick:c},"登录 ")])]),k("div",null,[w(De,{open:p.value,"onUpdate:open":x[8]||(x[8]=I=>p.value=I),footer:null,closable:!1,destroyOnClose:"",centered:""},{default:E(()=>[k("div",gn,[w(he(Jt),{onLoadCallback:S})])]),_:1},8,["open"])])])}}});const yn=H(mn,[["__scopeId","data-v-1b9aed99"]]),_n=o=>(yt("data-v-4dad7fb0"),o=o(),_t(),o),bn=_n(()=>k("div",{class:"enter-x-right"},[k("h4",{class:"font-bold text-[24px]"},"忘记密码"),k("p",{class:"my-5 text-[#8c8c8c]"},"请输入你需要重置的邮箱和新密码")],-1)),wn={class:""},xn={key:0,class:"text-[12px]"},Pn={key:1,class:"text-[12px]"},kn={class:"flex items-center justify-center",style:{"min-height":"78px"}},Cn=mt({__name:"ForgotPassword",emits:["login"],setup(o,{emit:a}){Dt(()=>{const M={height:5,tha:[0,360],g:.5,num:5,radius:6,circle:!0,alpha:[.75,.1],color:"random"},C=document.getElementsByClassName("obinput");for(let S=0;S<C.length;S++)ot.make(C[S],M);const O=document.getElementsByClassName("obpassinput");for(let S=0;S<O.length;S++)ot.make(O[S].children[0],M)});const s=Vt({email:"",email_code:"",password:"",_password:""}),n=a;function u(){n("login")}const c=K(!1);async function d(){try{if(!s.email)return U.error("请填写邮箱");if(!s.email_code)return U.error("请填写验证码");if(!s.password)return U.error("请填写密码");if(s._password!=s._password)return U.error("两次密码不一致");c.value=!0,await Di({email:s.email,email_code:s.email_code,password:s.password}),c.value=!1,U.success("修改成功"),u()}catch(M){c.value=!1,console.log(M)}}const b=K(60);let _;const p=K(!1),v=K(!1),{getConfig:y}=vt();async function B(M){await ei({email:s.email,recaptcha_data:M}),U.success("发送成功")}async function T(M){p.value||(await B(M),p.value=!0,_&&(clearInterval(_),_=null),_=setInterval(()=>{b.value--,b.value<=0&&(_&&clearInterval(_),p.value=!1,b.value=60)},1e3))}Kt(()=>{_&&(clearInterval(_),_=null)});const q=M=>{v.value=!1,T(M)};function F(){s.email?/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test(s.email)?y.is_recaptcha?v.value=!0:T():U.error("邮箱格式不正确"):U.error("请填写邮箱")}return(M,C)=>{const O=R("a-input"),S=R("a-form-item"),ne=R("a-button"),P=R("a-input-group"),x=R("a-input-password"),L=R("a-form"),$=R("a-modal");return A(),oe("div",null,[bn,k("div",wn,[w(L,{layout:"vertical",model:s},{default:E(()=>[w(S,{label:"邮箱",class:"enter-x-right"},{default:E(()=>[w(O,{value:s.email,"onUpdate:value":C[0]||(C[0]=m=>s.email=m),size:"large",class:"obinput",placeholder:"请输入您的邮箱"},null,8,["value"])]),_:1}),w(S,{label:"验证码",class:"enter-x-right"},{default:E(()=>[w(P,{compact:""},{default:E(()=>[w(O,{style:{width:"70%"},value:s.email_code,"onUpdate:value":C[1]||(C[1]=m=>s.email_code=m),size:"large",class:"obinput",placeholder:"验证码"},null,8,["value"]),w(ne,{style:{width:"30%"},size:"large",class:"send_button",disabled:p.value,onClick:F},{default:E(()=>[p.value?de("",!0):(A(),oe("span",xn,"发送验证码")),p.value?(A(),oe("span",Pn,Ot(b.value)+"s",1)):de("",!0)]),_:1},8,["disabled"])]),_:1})]),_:1}),w(S,{label:"密码",class:"enter-x-right"},{default:E(()=>[w(x,{value:s.password,"onUpdate:value":C[2]||(C[2]=m=>s.password=m),size:"large",placeholder:"密码",class:"obpassinput"},null,8,["value"])]),_:1}),w(S,{label:"确认密码",class:"enter-x-right"},{default:E(()=>[w(x,{value:s._password,"onUpdate:value":C[3]||(C[3]=m=>s._password=m),size:"large",placeholder:"确认密码",class:"obpassinput"},null,8,["value"])]),_:1}),w(S,{class:"enter-x-right"},{default:E(()=>[w(ne,{type:"primary",class:"w-full",size:"large",onClick:d,loading:c.value},{default:E(()=>[ze("立即重置 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),k("div",{class:"flex items-center justify-center enter-x-right"},[k("div",{class:"font-medium"},[ze("已经有帐户？"),k("span",{class:"text-theme cursor-pointer animated-div relative",onClick:u},"登录 ")])]),k("div",null,[w($,{open:v.value,"onUpdate:open":C[4]||(C[4]=m=>v.value=m),footer:null,closable:!1,destroyOnClose:"",centered:""},{default:E(()=>[k("div",kn,[w(he(Jt),{onLoadCallback:q})])]),_:1},8,["open"])])])}}});const Rn=H(Cn,[["__scopeId","data-v-4dad7fb0"]]);class En{constructor(){this.list=[]}set(a,s){this.list.push({probability:a,target:s,a:0,b:1}),this.calculation()}calculation(){let a=0;for(let s=0;s<this.list.length;s++)a+=this.list[s].probability;for(let s=0;s<this.list.length;s++){const n=this.list[s],u=n.probability/a;n.a=s===0?0:this.list[s-1].b,n.b=n.a+u}}getResult(){const a=Math.random();for(let s=0;s<this.list.length;s++){const n=this.list[s];if(a<=n.b&&a>n.a)return n.target}return this.list[0].target}}const In={name:"CanvasComp",props:{canvas:Object,bg:Boolean,globalCompositeOperation:String},data:function(){return{styleObject:{width:"100%",height:"100%"}}},methods:{initCanvas:function(){const o=this.$refs.canvasRef,a=o.clientWidth,s=o.clientHeight;if(o.width=a,o.height=s,this.globalCompositeOperation){const n=o.getContext("2d");n.globalCompositeOperation=this.globalCompositeOperation}this.$emit("canvasInited",o)},resize:function(){const o=this.$refs.canvasRef,a=o.clientWidth,s=o.clientHeight;o.width=a,o.height=s,this.$emit("canvasResize",{width:a,height:s})},handleMouseDown:function(o){this.$emit("canvasMouseDown",o)},handleMouseMove:function(o){this.$emit("canvasMouseMove",o)}},created(){this.bg&&(this.styleObject=Object.assign(this.styleObject,{position:"absolute",zIndex:-1,top:0,left:0})),this.canvas&&(this.styleObject=Object.assign(this.styleObject,this.canvas))},mounted(){this.initCanvas(),this.resize=this.resize.bind(this),window.addEventListener("resize",this.resize)},beforeDestroy(){window.removeEventListener("resize",this.resize)}};function An(o,a,s,n,u,c){return A(),oe("canvas",{class:"canvas",ref:"canvasRef",style:Vi(o.styleObject),onMousedown:a[0]||(a[0]=(...d)=>c.handleMouseDown&&c.handleMouseDown(...d)),onMousemove:a[1]||(a[1]=(...d)=>c.handleMouseMove&&c.handleMouseMove(...d))},null,36)}const re=H(In,[["render",An],["__scopeId","data-v-327f8983"]]);function Bn(o){var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:{}}function bt(o,a){let s;return o?(s=Bn(o),`rgba(${s.r},${s.g},${s.b}, ${a})`):null}const Tn={name:"BallParticles",components:{CanvasComp:re},props:{canvas:Object,bg:Boolean,num:Number,color:String,config:{}},methods:{canvasInited(o){this.createProton(o),this.createMiniEmitter(o),z.add(this.renderProton)},canvasResize({width:o,height:a}){this.crossZoneBehaviour.zone.width=o,this.crossZoneBehaviour.zone.height=a,this.proton.renderers[0].resize(o,a)},canvasMouseDown(o){},createProton(o){o.width,o.height,this.proton=new l;const a=o.getContext("2d"),s=new l.Emitter;s.rate=new l.Rate(this.num?new l.Span(this.num):new l.Span(4,9),new l.Span(.8,1.3)),s.addInitialize(new l.Mass(1)),s.addInitialize(new l.Radius(1,50)),s.addInitialize(new l.Life(5,6)),s.addInitialize(new l.Velocity(new l.Span(5,8),new l.Span(30,70),"polar")),s.addBehaviour(new l.Alpha(1,0)),s.addBehaviour(new l.Color(["#36aaf3","#fd769c","#94ff22","#ffa545","#ffffff"])),s.addBehaviour(new l.Scale(.7,1)),s.addBehaviour(new l.Gravity(3)),s.addBehaviour(new l.Collision(s)),s.addBehaviour(this.customDeadBehaviour(o));const n=new l.CrossZone(new l.RectZone(0,0,o.width,o.height),"bound");s.addBehaviour(n),s.p.x=Math.min(500,Math.max(o.width/2-400,50)),s.p.y=o.height/2+50,s.emit(),this.proton.addEmitter(s);const u=new l.CanvasRenderer(o);u.onProtonUpdate=()=>{a.fillStyle=bt(this.color,.2)||"rgba(255, 255, 255, 0.2)",a.fillRect(0,0,o.width,o.height)},this.proton.addRenderer(u),this.crossZoneBehaviour=n},customDeadBehaviour(o){return{initialize(a){},applyBehaviour:a=>{a.p.y+a.radius>=o.height&&a.radius>9&&(this.miniEmitteing(a),a.dead=!0)}}},createMiniEmitter(o){const a=new l.Emitter;a.rate=new l.Rate(new l.Span(3,6),new l.Span(1,2)),a.addInitialize(new l.Mass(1)),a.radiusInitialize=new l.Radius,a.addInitialize(a.radiusInitialize),a.addInitialize(new l.Life(.5,1)),a.addInitialize(new l.V(new l.Span(1.5,3),new l.Span(0,70,!0),"polar")),a.colorBehaviour=new l.Color("#ffffff"),a.addBehaviour(new l.Alpha(1,0)),a.addBehaviour(a.colorBehaviour),a.addBehaviour(new l.Gravity(4)),a.addBehaviour(new l.Collision(a)),a.addBehaviour(new l.CrossZone(new l.RectZone(0,0,o.width,o.height),"bound")),this.proton.addEmitter(a),this.miniEmitter=a},miniEmitteing(o){const a=this.miniEmitter;a.radiusInitialize.reset(o.radius*.05,o.radius*.2),a.colorBehaviour.reset(o.color),a.p.x=o.p.x,a.p.y=o.p.y,a.emit("once")},renderProton(){this.proton&&this.proton.update()}},beforeDestroy(){try{this.proton.destroy(),z.remove(this.renderProton)}catch{}}};function Sn(o,a,s,n,u,c){const d=R("canvas-comp");return A(),j(d,{bg:s.bg,canvas:s.canvas,"global-composite-operation":"source-over",onCanvasInited:c.canvasInited,onCanvasResize:c.canvasResize,onCanvasMouseDown:c.canvasMouseDown},null,8,["bg","canvas","onCanvasInited","onCanvasResize","onCanvasMouseDown"])}const Mn=H(Tn,[["render",Sn]]),zn=["#529B88","#CDD180","#FFFA32","#FB6255","#FB4A53","#FF4E50","#F9D423"],On={name:"ColorParticles",components:{CanvasComp:re},props:{canvas:Object,bg:Boolean,num:Number,config:{}},methods:{canvasInited(o){this.createProton(o),z.add(this.renderProton)},canvasResize({width:o,height:a}){this.proton.renderers[0].resize(o,a)},canvasMouseDown(o){},createProton(o){const a=o.width,s=o.height;this.proton=new l;const n=new l.Emitter;n.rate=new l.Rate(this.num?new l.Span(this.num):new l.Span(5,8),new l.Span(.1,.25)),n.addInitialize(new l.Mass(1)),n.addInitialize(new l.Radius(20,200)),n.addInitialize(new l.Life(2,4)),n.addInitialize(new l.Position(new l.RectZone(0,0,a,s))),n.addBehaviour(new l.Alpha(0,1,1/0,l.easeOutCubic)),n.addBehaviour(new l.Scale(1,0,1/0,l.easeOutCubic)),n.addBehaviour(new l.Color(zn,"random")),n.emit(),this.proton.addEmitter(n);const u=new l.CanvasRenderer(o);this.proton.addRenderer(u)},renderProton(){this.proton&&this.proton.update()}},beforeDestroy(){try{this.proton.destroy(),z.remove(this.renderProton)}catch{}}};function Dn(o,a,s,n,u,c){const d=R("canvas-comp");return A(),j(d,{bg:s.bg,canvas:s.canvas,"global-composite-operation":"source-over",onCanvasInited:c.canvasInited,onCanvasResize:c.canvasResize,onCanvasMouseDown:c.canvasMouseDown},null,8,["bg","canvas","onCanvasInited","onCanvasResize","onCanvasMouseDown"])}const Vn=H(On,[["render",Dn]]),Fn=["#529B88","#CDD180","#FFFA32","#FB6255","#FB4A53","#FF4E50","#F9D423"],Ln={name:"ColorParticles",components:{CanvasComp:re},props:{canvas:Object,bg:Boolean,color:String,num:Number,config:{}},methods:{canvasInited(o){this.createProton(o),z.add(this.renderProton)},canvasResize({width:o,height:a}){this.crossZoneBehaviour.zone.width=o,this.crossZoneBehaviour.zone.height=a,this.proton.renderers[0].resize(o,a)},canvasMouseDown(o){},createProton(o){o.width,o.height,this.proton=new l;const a=new l.Emitter;a.rate=new l.Rate(this.num||20),a.damping=.008,a.addInitialize(new l.Mass(1)),a.addInitialize(new l.Radius(30,600)),a.addInitialize(new l.Velocity(new l.Span(.5),new l.Span(0,360),"polar")),a.addInitialize(new l.Position(new l.RectZone(0,0,o.width,o.height)));const s=new l.CrossZone(new l.RectZone(0,0,o.width,o.height),"cross");a.addBehaviour(s),a.addBehaviour(new l.Alpha(l.getSpan(.35,.55))),a.addBehaviour(new l.Color(this.getColor())),a.addBehaviour(new l.RandomDrift(50,50,.5)),a.emit("once"),this.proton.addEmitter(a);const n=new l.CanvasRenderer(o);this.proton.addRenderer(n),this.crossZoneBehaviour=s},getColor(){let o=Fn;return this.color&&(Array.isArray(this.color)?o=this.color:o=[this.color]),o},renderProton(){this.proton&&this.proton.update()}},beforeDestroy(){try{this.proton.destroy(),z.remove(this.renderProton)}catch{}}};function Un(o,a,s,n,u,c){const d=R("canvas-comp");return A(),j(d,{bg:s.bg,canvas:s.canvas,"global-composite-operation":"source-over",onCanvasInited:c.canvasInited,onCanvasResize:c.canvasResize,onCanvasMouseDown:c.canvasMouseDown},null,8,["bg","canvas","onCanvasInited","onCanvasResize","onCanvasMouseDown"])}const jn=H(Ln,[["render",Un]]),Nn={name:"CobwebParticles",components:{CanvasComp:re},props:{canvas:Object,bg:Boolean,color:String,num:Number,config:{}},methods:{canvasInited(o){this.createProton(o),z.add(this.renderProton)},canvasResize({width:o,height:a}){this.crossZoneBehaviour.zone.width=o,this.crossZoneBehaviour.zone.height=a,this.proton.renderers[0].resize(o,a)},canvasMouseDown(o){},createProton(o){const a=o.width,s=o.height;this.proton=new l;const n=new l.Emitter;n.rate=new l.Rate(this.num?new l.Span(this.num):new l.Span(100),new l.Span(.05,.2)),n.addInitialize(new l.Mass(1)),n.addInitialize(new l.Radius(1,4)),n.addInitialize(new l.Life(1/0));const u=new l.Position(new l.RectZone(0,0,a,s));n.addInitialize(u),n.addInitialize(new l.Velocity(new l.Span(.3,.6),new l.Span(0,360),"polar")),n.addBehaviour(new l.Alpha(l.getSpan(.2,.9))),n.addBehaviour(new l.Color(this.color||"#333")),this.crossZoneBehaviour=new l.CrossZone(new l.RectZone(0,0,a,s),"cross"),n.addBehaviour(this.crossZoneBehaviour),n.emit("once"),n.damping=0,this.proton.addEmitter(n),this.proton.addRenderer(this.createRenderer(o,n))},createRenderer(o,a){const s=o.getContext("2d"),n=new l.CanvasRenderer(o),u=140;return n.onProtonUpdateAfter=()=>{let c=a.particles;for(let d=0;d<c.length;d++)for(let b=d+1;b<c.length;b++){let _=c[d],p=c[b],v=_.p.distanceTo(p.p);if(v<u){let y=(1-v/u)*.5;s.strokeStyle=bt(this.color,y)||`rgba(3, 3, 3, ${y})`,s.beginPath(),s.moveTo(_.p.x,_.p.y),s.lineTo(p.p.x,p.p.y),s.closePath(),s.stroke()}}},n},renderProton(){this.proton&&this.proton.update()}},beforeDestroy(){try{this.proton.destroy(),z.remove(this.renderProton)}catch{}}};function Zn(o,a,s,n,u,c){const d=R("canvas-comp");return A(),j(d,{bg:s.bg,canvas:s.canvas,"global-composite-operation":"source-over",onCanvasInited:c.canvasInited,onCanvasResize:c.canvasResize,onCanvasMouseDown:c.canvasMouseDown},null,8,["bg","canvas","onCanvasInited","onCanvasResize","onCanvasMouseDown"])}const $n=H(Nn,[["render",Zn]]),Hn={name:"ThickParticles",components:{CanvasComp:re},props:{canvas:Object,bg:Boolean,color:String,num:Number,config:{}},methods:{canvasInited(o){this.canvasDom=o,this.createProton(o),z.add(this.renderProton),this.color&&(o.style.backgroundColor=this.color)},canvasResize({width:o,height:a}){this.crossZoneBehaviour.zone.width=o,this.crossZoneBehaviour.zone.height=a,this.proton.renderers[0].resize(o,a)},canvasMouseDown(o){},createProton(o){o.width,o.height,this.proton=new l;const a=new l.Emitter;a.damping=.008,a.rate=new l.Rate(this.num?this.num:150),a.addInitialize(new l.Mass(1)),a.addInitialize(new l.Radius(8)),a.addInitialize(new l.V(new l.Span(.1,.5),new l.Span(0,360),"polar")),a.addInitialize(new l.Position(new l.CircleZone(o.width/2,o.height/2,100)));const s=new l.CrossZone(new l.RectZone(0,0,o.width,o.height),"cross");a.addBehaviour(s),this.repulsion=new l.Repulsion({x:o.width/2,y:o.height/2-100},3,300),this.attraction=new l.Attraction({x:o.width/2,y:o.height/2},3,200),a.addBehaviour(this.attraction,this.repulsion),a.addBehaviour(new l.Color("random")),a.addBehaviour(new l.RandomDrift(20,15,.15)),a.emit("once"),this.proton.addEmitter(a),this.proton.addRenderer(this.createRenderer(o)),this.crossZoneBehaviour=s},createRenderer(o){const a=o.getContext("2d"),s=new l.CanvasRenderer(o);return s.onProtonUpdate=()=>{this.hue+=1,a.fillStyle=bt(this.color,.02)||"rgba(0, 0, 0, 0.02)",a.fillRect(0,0,o.width,o.height)},s.onParticleCreated=n=>{n.data.begin=l.MathUtil.randomAToB(1,120),n.data.tha=l.MathUtil.randomAToB(0,Math.PI*2)},s.onParticleUpdate=n=>{const u=n.data.begin+this.hue;n.color=this.colorTemplate.replace("hue",u%360);const c=3/4,d=n.radius*(1-c)*Math.cos(n.data.tha+=.01)+n.radius*c;a.beginPath(),a.fillStyle=n.color,a.arc(n.p.x,n.p.y,d,0,Math.PI*2,!0),a.closePath(),a.fill()},s},renderProton(){const o=this.canvasDom;this.proton.update(),this.index%200===0&&(this.attraction.targetPosition.x=Math.random()*o.width,this.attraction.targetPosition.y=Math.random()*o.height,this.repulsion.targetPosition.x=Math.random()*o.width,this.repulsion.targetPosition.y=Math.random()*o.height),this.index++}},created(){this.hue=0,this.index=0,this.colorTemplate="hsla(hue,80%,50%, 0.75)",this.renderProton=this.renderProton.bind(this)},beforeDestroy(){try{this.proton.destroy(),z.remove(this.renderProton)}catch{}}};function qn(o,a,s,n,u,c){const d=R("canvas-comp");return A(),j(d,{bg:s.bg,canvas:s.canvas,"global-composite-operation":"source-over",onCanvasInited:c.canvasInited,onCanvasResize:c.canvasResize,onCanvasMouseDown:c.canvasMouseDown},null,8,["bg","canvas","onCanvasInited","onCanvasResize","onCanvasMouseDown"])}const Gn=H(Hn,[["render",qn]]),Xn=["#529B88","#CDD180","#FFFA32","#FB6255","#FB4A53","#FF4E50","#F9D423"],Yn={name:"CustomParticles",components:{CanvasComp:re},props:{canvas:Object,bg:Boolean,num:Number,color:String,globalCompositeOperation:String,config:{}},methods:{canvasInited(o){this.createProton(o),z.add(this.renderProton)},canvasResize({width:o,height:a}){this.crossZoneBehaviour.zone.width=o,this.crossZoneBehaviour.zone.height=a,this.proton.renderers[0].resize(o,a)},canvasMouseDown(o){},getCompositeOperation(){return this.globalCompositeOperation||this.operation||"source-over"},getProp(o,a){const n=(this.config||{})[o]||a;return Array.isArray(n)?new l.Span(n[0],n[1]):n},getArrProp(o,a){const n=(this.config||{})[o]||a;return n?Array.isArray(n)?n:[n,n]:null},createProton(o,a,s){const n=this.getProp("num",[5,8]),u=this.getProp("rps",[.1,.2]),c=this.getProp("mass",1),d=this.getProp("radius",[10,30]),b=this.getProp("life",[2,3]),_=this.getProp("body"),p=this.getProp("position"),v=this.getProp("v",[2,3]),y=this.getProp("tha",[-15,15]),B=this.getArrProp("alpha"),T=this.getArrProp("scale"),q=this.getArrProp("color"),F=this.getProp("cross","dead"),M=this.getProp("random"),C=this.getArrProp("rotate"),O=this.getProp("g"),S=this.getArrProp("f"),ne=this.getProp("emitter");this.proton=new l;let P;ne==="follow"?P=new l.FollowEmitter:P=new l.Emitter,P.rate=new l.Rate(n,u),P.addInitialize(new l.Mass(c)),P.addInitialize(new l.Radius(d)),P.addInitialize(new l.Life(b)),P.addInitialize(new l.Velocity(v,y,"polar")),_&&P.addInitialize(new l.Body(_));let x;p==="all"||p==="screen"?x=new l.Position(new l.RectZone(0,0,o.width,o.height)):typeof p=="object"?x=new l.Position(new l.RectZone(p.x,p.y,p.width,p.height)):(P.p.x=o.width/2,P.p.y=o.height/2),P.addInitialize(x);const L=B?new l.Alpha(B[0],B[1]):new l.Alpha(0,1),$=T?new l.Scale(T[0],T[1]):new l.Scale(1,.2),m=q?new l.Color(q[0],q[1]):new l.Color(Xn);P.addBehaviour(L),P.addBehaviour($),_||P.addBehaviour(m),C&&(C[0]===!0||C[0]==="rotate"?P.addBehaviour(new l.Rotate):P.addBehaviour(new l.Rotate(C[0],C[1])));const ce=new l.RectZone(0,0,o.width,o.height),X=new l.CrossZone(ce,F);P.addBehaviour(X),M&&P.addBehaviour(new l.RandomDrift(M,M,.05)),O&&P.addBehaviour(new l.G(O)),S&&P.addBehaviour(new l.F(S[0],S[1])),P.emit(),this.proton.addEmitter(P);const pe=this.createRenderer(o);this.proton.addRenderer(pe),this.emitter=P,this.crossZoneBehaviour=X},createRenderer(o){const a=o.width,s=o.height,n=o.getContext("2d"),u=new l.CanvasRenderer(o),c=this.getProp("onUpdate");c&&(u.onProtonUpdate=()=>{c(n,a,s)});const d=this.getProp("onParticleCreated");d&&(u.onParticleCreated=_=>{d(n,_)});const b=this.getProp("onParticleUpdate");return b&&(u.onParticleUpdate=_=>{b(n,_)}),u},renderProton(){this.proton&&this.proton.update()}},beforeDestroy(){try{this.proton.destroy(),z.remove(this.renderProton)}catch{}}};function Wn(o,a,s,n,u,c){const d=R("canvas-comp");return A(),j(d,{bg:s.bg,canvas:s.canvas,"global-composite-operation":"getCompositeOperation()",onCanvasInited:c.canvasInited,onCanvasResize:c.canvasResize,onCanvasMouseDown:c.canvasMouseDown},null,8,["bg","canvas","onCanvasInited","onCanvasResize","onCanvasMouseDown"])}const Qn=H(Yn,[["render",Wn]]),Kn={name:"LinesParticles",components:{CanvasComp:re},props:{canvas:Object,bg:Boolean,color:String,num:Number,config:{}},methods:{canvasInited(o){this.createProton(o),z.add(this.renderProton),this.color&&(o.style.backgroundColor=this.color)},canvasResize({width:o,height:a}){this.crossZoneBehaviour.zone.width=o,this.crossZoneBehaviour.zone.height=a,this.proton.renderers[0].resize(o,a)},canvasMouseDown(o){},createProton(o){const a=o.width,s=o.height;this.proton=new l;const n=new l.Emitter;n.damping=.008,n.rate=new l.Rate(this.num?this.num:250),n.addInitialize(new l.Mass(1)),n.addInitialize(new l.Radius(4)),n.addInitialize(new l.Velocity(new l.Span(1.5),new l.Span(0,360),"polar"));const u={x:a/2,y:s/2},c=new l.Attraction(u,0,0),d=new l.CrossZone(new l.RectZone(0,0,o.width,o.height),"cross");n.addBehaviour(new l.Color("random")),n.addBehaviour(c,d),n.addBehaviour(new l.RandomDrift(10,10,.05)),n.p.x=o.width/2,n.p.y=o.height/2,n.emit("once"),this.proton.addEmitter(n),this.proton.addRenderer(this.createRenderer(o)),this.crossZoneBehaviour=d},createRenderer(o){const a=o.getContext("2d"),s=new l.CanvasRenderer(o);return s.onProtonUpdate=()=>{a.fillStyle=bt(this.color,.02)||"rgba(0, 0, 0, 0.02)",a.fillRect(0,0,o.width,o.height)},s.onParticleUpdate=function(n){a.beginPath(),a.strokeStyle=n.color,a.lineWidth=1,a.moveTo(n.old.p.x,n.old.p.y),a.lineTo(n.p.x,n.p.y),a.closePath(),a.stroke()},s},renderProton(){this.proton&&this.proton.update()}},beforeDestroy(){try{this.proton.destroy(),z.remove(this.renderProton)}catch{}}};function Jn(o,a,s,n,u,c){const d=R("canvas-comp");return A(),j(d,{bg:s.bg,canvas:s.canvas,"global-composite-operation":"source-over",onCanvasInited:c.canvasInited,onCanvasResize:c.canvasResize,onCanvasMouseDown:c.canvasMouseDown},null,8,["bg","canvas","onCanvasInited","onCanvasResize","onCanvasMouseDown"])}const ea=H(Kn,[["render",Jn]]),ta=["#f6b93b","#18dcff","#cd84f1","#ED4C67","#ffffff","#b71540","#32ff7e","#ff3838"],ia={name:"PolygonParticles",components:{CanvasComp:re},props:{canvas:Object,canvas:Object,bg:Boolean,color:String,num:Number,config:{}},methods:{canvasInited(o){const a=o.width,s=o.height;this.createProton(o),this.createEmitter({canvas:o,x:a/2,y:s/2,mainEmitter:!0,zone:"bound"}),z.add(this.renderProton)},canvasResize({width:o,height:a}){this.proton.renderers[0].resize(o,a)},canvasMouseDown(o){},createProton(o){this.proton=new l;const a=this.createRenderer(o);this.proton.addRenderer(a)},createRenderer(o){const a=o.getContext("2d"),s=new l.CustomRenderer;s.onProtonUpdate=()=>{a.clearRect(0,0,o.width,o.height)},s.onParticleCreated=u=>{u.data.count=l.MathUtil.randomAToB(3,10,!0)},s.onParticleUpdate=u=>{a.save(),a.globalAlpha=u.alpha,a.fillStyle=u.color,a.translate(u.p.x,u.p.y),a.rotate(l.MathUtil.degreeTransform(u.rotation)),a.translate(-u.p.x,-u.p.y),a.beginPath(),n(u,u.data.count),a.closePath(),a.fill(),a.globalAlpha=1,a.restore()},s.onParticleDead=u=>{};const n=(u,c)=>{if(c>=7)a.arc(u.p.x,u.p.y,u.radius,0,Math.PI*2,!0);else{const d=u.radius;for(let b=0;b<=c;b++){let _=u.p.x+d*Math.cos(Math.PI/180*360/c*b),p=u.p.y+d*Math.sin(Math.PI/180*360/c*b);b===0?a.moveTo(_,p):a.lineTo(_,p)}}};return s},createEmitter({mainEmitter:o,canvas:a,x:s,y:n,radius:u,color:c=ta,zone:d="dead",once:b="all",alpha:_=.85,gravity:p=3.5}){const v=this.proton.pool.get(l.Emitter);if(!v.completed){v.rate=new l.Rate(this.num?new l.Span(this.num):new l.Span(4,9),new l.Span(1.6,2.2));const y=o?new l.Radius(10,110):new l.Radius(3,u);v.addInitialize(new l.Mass(1)),v.addInitialize(y),v.addInitialize(new l.Life(3,6)),v.addInitialize(new l.Velocity(new l.Span(4,6),new l.Span(-90,90),"polar")),v.addBehaviour(new l.Alpha(_,.2)),v.addBehaviour(new l.Color(c)),v.addBehaviour(new l.Scale(1,.3)),v.addBehaviour(new l.Rotate),v.addBehaviour(new l.Gravity(p)),v.addBehaviour(this.customDeadBehaviour(a)),v.addBehaviour(new l.CrossZone(new l.RectZone(0,0,a.width,a.height),d))}v.p.x=s,v.p.y=n,b==="once"?v.emit("once"):v.emit(),this.proton.addEmitter(v)},expireEmitter(o){setTimeout(()=>{o.completed=!0,this.proton.pool.expire(o),this.proton.removeEmitter(o)},500)},customDeadBehaviour(o){return{initialize:a=>{a.data=a.data||{},a.data.oldRadius=a.radius,a.data.emitterCount=0},applyBehaviour:a=>{a.radius<5||a.data.emitterCount>=2||a.radius<=1/3*a.data.oldRadius&&(a.data.emitterCount++,this.createEmitter({canvas:o,x:a.p.x,y:a.p.y,radius:a.radius*(1/2),alpha:.5,gravity:5,color:a.color,once:"once"}))}}},renderProton(){this.proton&&this.proton.update()}},beforeDestroy(){try{this.proton.destroy(),z.remove(this.renderProton)}catch{}}};function na(o,a,s,n,u,c){const d=R("canvas-comp");return A(),j(d,{bg:s.bg,canvas:s.canvas,"global-composite-operation":"xor",onCanvasInited:c.canvasInited,onCanvasResize:c.canvasResize,onCanvasMouseDown:c.canvasMouseDown},null,8,["bg","canvas","onCanvasInited","onCanvasResize","onCanvasMouseDown"])}const aa=H(ia,[["render",na]]),oa=["#fad390","#81ecec","#ffffff","#badc58","#f9ca24","#FEA47F"],ra={name:"SquareParticles",components:{CanvasComp:re},props:{canvas:Object,bg:Boolean,color:String,num:Number,config:{}},methods:{canvasInited(o){this.createProton(o),z.add(this.renderProton),this.color&&(o.style.backgroundColor=this.color)},canvasResize({width:o,height:a}){this.crossZoneBehaviour.zone.width=o+2*150,this.crossZoneBehaviour.zone.height=a+2*150,this.proton.renderers[0].resize(o,a)},canvasMouseDown(o){},createProton(o){o.width,o.height,this.proton=new l;const a=new l.Emitter;a.rate=new l.Rate(this.num?this.num:50),a.damping=0,a.addInitialize(new l.Mass(1)),a.addInitialize(new l.Radius(4,70)),a.addInitialize(new l.Velocity(new l.Span(4,12),180,"polar")),a.addInitialize(new l.Position(new l.LineZone(0,0,o.width,0)));const s=150,n=new l.CrossZone(new l.RectZone(0-s,0-s,o.width+2*s,o.height+2*s),"cross");a.addBehaviour(n),a.addBehaviour(new l.Alpha(l.getSpan(.1,.55))),a.addBehaviour(new l.Color(oa)),a.emit("once"),this.proton.addEmitter(a);const u=this.createRenderer(o);this.proton.addRenderer(u),this.crossZoneBehaviour=n,a.preEmit(2)},createRenderer(o){const a=o.getContext("2d"),s=new l.CustomRenderer;return s.onProtonUpdate=()=>{a.clearRect(0,0,o.width,o.height)},s.onParticleCreated=n=>{const u=n.radius||60,c=l.MathUtil.randomAToB(100,200,"int");n.data.w=u,n.data.h=c},s.onParticleUpdate=n=>{const u=n.data.w,c=n.data.h;a.save(),a.globalAlpha=n.alpha,a.fillStyle=n.color,a.translate(n.p.x,n.p.y),a.rotate(l.MathUtil.degreeTransform(n.rotation)),a.translate(-n.p.x,-n.p.y),a.beginPath(),a.rect(n.p.x-u/2,n.p.y-c/2,u,c),a.closePath(),a.fill(),a.globalAlpha=1,a.restore()},s},renderProton(){this.proton&&this.proton.update()}},beforeDestroy(){try{this.proton.destroy(),z.remove(this.renderProton)}catch{}}};function sa(o,a,s,n,u,c){const d=R("canvas-comp");return A(),j(d,{bg:s.bg,canvas:s.canvas,"global-composite-operation":"lighter",onCanvasInited:c.canvasInited,onCanvasResize:c.canvasResize,onCanvasMouseDown:c.canvasMouseDown},null,8,["bg","canvas","onCanvasInited","onCanvasResize","onCanvasMouseDown"])}const la=H(ra,[["render",sa]]),ha=["#529B88","#CDD180","#FFFA32","#FB6255","#FB4A53","#FF4E50","#F9D423"],ca={name:"FountainParticles",components:{CanvasComp:re},props:{canvas:Object,bg:Boolean,color:String,num:Number,config:{}},methods:{canvasInited(o){this.createProton(o),z.add(this.renderProton),this.color&&(o.style.backgroundColor=this.color)},canvasResize({width:o,height:a}){this.proton.renderers[0].resize(o,a)},canvasMouseDown(o){},createProton(o){const a=o.width,s=o.height;this.proton=new l;const n=new l.Emitter;n.rate=new l.Rate(this.num?new l.Span(this.num):new l.Span(4,8),new l.Span(.1,.25)),n.addInitialize(new l.Mass(1)),n.addInitialize(new l.Radius(20,200)),n.addInitialize(new l.Life(2,4)),n.addInitialize(new l.Velocity(new l.Span(4,7),new l.Span(0,360),"polar")),n.addInitialize(new l.Position(new l.CircleZone(a/2,s/2,100))),n.addBehaviour(new l.Alpha(1,0)),n.addBehaviour(new l.Scale(.2,1)),n.addBehaviour(this.createCustomBehaviour()),n.addBehaviour(new l.Color(ha,"random")),n.emit(),this.proton.addEmitter(n);const u=new l.CanvasRenderer(o);this.proton.addRenderer(u)},createCustomBehaviour(){return{initialize:function(a){a.f=new l.Vector2D(0,0)},applyBehaviour:a=>{let s=a.v.length()/1e3,n=a.v.getGradient();n+=3.14/2,a.f.x=1e3*s*Math.cos(n),a.f.y=1e3*s*Math.sin(n),a.a.add(a.f)}}},renderProton(){this.proton&&this.proton.update()}},beforeDestroy(){try{this.proton.destroy(),z.remove(this.renderProton)}catch{}}};function ua(o,a,s,n,u,c){const d=R("canvas-comp");return A(),j(d,{bg:s.bg,canvas:s.canvas,"global-composite-operation":"xor",onCanvasInited:c.canvasInited,onCanvasResize:c.canvasResize,onCanvasMouseDown:c.canvasMouseDown},null,8,["bg","canvas","onCanvasInited","onCanvasResize","onCanvasMouseDown"])}const da=H(ca,[["render",ua]]),pa={name:"TadpoleParticles",components:{CanvasComp:re},props:{canvas:Object,bg:Boolean,color:String,num:Number,config:{}},methods:{canvasInited(o){this.createProton(o),z.add(this.renderProton)},canvasResize({width:o,height:a}){this.crossZoneBehaviour.zone.width=o,this.crossZoneBehaviour.zone.height=a,this.proton.renderers[0].resize(o,a)},canvasMouseDown(o){},createProton(o){const a=o.width,s=o.height;this.proton=new l;const n=new l.Emitter;n.damping=.008,n.rate=new l.Rate(this.num?this.num:50),n.addInitialize(new l.Mass(1)),n.addInitialize(new l.Radius(5,9)),n.addInitialize(new l.Velocity(new l.Span(1.5),new l.Span(0,360),"polar")),n.addInitialize(new l.Position(new l.RectZone(0,0,a,s)));const u={x:a/2,y:s/2},c=new l.Attraction(u,0,0),d=new l.CrossZone(new l.RectZone(0,0,o.width,o.height),"bound");n.addBehaviour(new l.Color(this.color||"#bbbbbb")),n.addBehaviour(c,d),n.addBehaviour(new l.RandomDrift(15,15,.05)),n.emit("once"),this.proton.addEmitter(n),this.proton.addRenderer(this.createRenderer(o)),this.crossZoneBehaviour=d},createRenderer(o){const n=o.getContext("2d"),u=new l.CanvasRenderer(o);u.onProtonUpdate=function(){n.clearRect(0,0,o.width,o.height)},u.onParticleCreated=p=>{p.data.points=[],p.data.index=0},u.onParticleUpdate=function(p){b(p),p.data.index%6===0&&c(p),d(p),p.data.index++};const c=p=>{p.data.points.unshift(p.p.y),p.data.points.unshift(p.p.x),p.data.points.length>12&&(p.data.points.pop(),p.data.points.pop())},d=p=>{n.fillStyle=p.color,n.beginPath(),n.arc(p.p.x,p.p.y,p.radius,0,Math.PI*2,!0),n.closePath(),n.fill()},b=p=>{n.beginPath(),n.strokeStyle=p.color,n.moveTo(p.p.x,p.p.y);const v=p.data.points.length;for(let y=0;y<v;y+=2){const B=p.data.points[y],T=p.data.points[y+1];n.lineWidth=_(y,v),n.lineTo(B,T),n.stroke()}},_=(p,v)=>{if(v<=2)return 1;const B=(6-1)/(2/v-1),T=1-B,q=(p+2)/v;let F=B*q+T;return F=F>>0,F};return u},renderProton(){this.proton&&this.proton.update()}},beforeDestroy(){try{this.proton.destroy(),z.remove(this.renderProton)}catch{}}};function fa(o,a,s,n,u,c){const d=R("canvas-comp");return A(),j(d,{bg:s.bg,canvas:s.canvas,"global-composite-operation":"xor",onCanvasInited:c.canvasInited,onCanvasResize:c.canvasResize,onCanvasMouseDown:c.canvasMouseDown},null,8,["bg","canvas","onCanvasInited","onCanvasResize","onCanvasMouseDown"])}const va=H(pa,[["render",fa]]),ga={name:"ParticlesBg",components:{ColorParticles:Vn,CircleParticles:jn,CobwebParticles:$n,ThickParticles:Gn,LinesParticles:ea,FountainParticles:da,CustomParticles:Qn,PolygonParticles:aa,SquareParticles:la,TadpoleParticles:va,BallParticles:Mn},props:{type:{type:String,required:!1,default:"random"},num:[String,Number],bg:Boolean,color:String,config:Object,canvas:Object,list:Array,globalCompositeOperation:String},data(){return{particles:"color-particles"}},methods:{getNum(){return+this.num},getRandom(){return this.random||(this.random=new En,this.random.set(.25,"color-particles"),this.random.set(.2,"ball-particles"),this.random.set(.2,"circle-particles"),this.random.set(.2,"cobweb-particles"),this.random.set(.2,"thick-particles"),this.random.set(.2,"lines-particles"),this.random.set(.2,"fountain-particles"),this.random.set(.2,"polygon-particles"),this.random.set(.2,"square-particles"),this.random.set(.2,"tadpole-particles")),this.random.getResult()},getFromList(){if(!this.list)return this.getRandom();let o=this.list[Math.floor(Math.random()*this.list.length)];return o=this.transformName(o),o},transformName(o){return o=String(o).toLowerCase()||"random",o.indexOf("-")<=0&&(o+="-particles"),o},setParticles(){this.particles=this.transformName(this.type),this.particles.indexOf("random")===0&&(this.particles=this.getRandom()),this.particles.indexOf("list")===0&&(this.particles=this.getFromList())}},created(){this.setParticles()},beforeMount(){}};function ma(o,a,s,n,u,c){return A(),j(Fi(u.particles),{globalCompositeOperation:s.globalCompositeOperation,num:c.getNum(),bg:s.bg,color:s.color,canvas:s.canvas,config:s.config},null,8,["globalCompositeOperation","num","bg","color","canvas","config"])}const ya=H(ga,[["render",ma]]),_a=o=>(yt("data-v-d89ecd02"),o=o(),_t(),o),ba={class:"w-full h-full flex overflow-hidden login_main"},wa={class:"w-full h-full flex overflow-hidden absolute inset-0 z-[1]"},xa=_a(()=>k("div",{class:"flex-1 p-5 hidden lg:block"},[k("div",{class:"w-11/12 h-full rounded-xl"})],-1)),Pa={class:"flex-1 flex flex-col items-center justify-center"},ka={class:"sm:w-[360px] w-11/12 shadow-2xl sm:p-[30px] p-[20px] rounded-md bg-[#f2f4fb] max-w-[360px]"},Ca={class:"absolute inset-0"},Ra=mt({__name:"login",setup(o){const a={num:[2,4],rps:.1,radius:[5,40],life:[1.5,3],v:[1,2],tha:[-30,30],alpha:[.6,0],scale:[.1,.4],position:"all",cross:"dead",random:15},s=K(!0),n=K(!1),u=K(!1);gt.currentRoute.value.query.code&&(n.value=!0,s.value=!1,u.value=!1);function c(){s.value=!0,n.value=!1,u.value=!1}function d(){s.value=!1,n.value=!0,u.value=!1}function b(){s.value=!1,n.value=!1,u.value=!0}return(_,p)=>(A(),oe("div",ba,[k("div",wa,[xa,k("div",Pa,[k("div",ka,[s.value?(A(),j(sn,{key:0,onRegister:d,onForgotPassword:b})):de("",!0),n.value?(A(),j(yn,{key:1,onLogin:c})):de("",!0),u.value?(A(),j(Rn,{key:2,onLogin:c})):de("",!0)])])]),k("div",Ca,[w(ya,{bg:_.object,type:"custom",config:a},null,8,["bg"])])]))}});const Ia=H(Ra,[["__scopeId","data-v-d89ecd02"]]);export{Ia as default};
