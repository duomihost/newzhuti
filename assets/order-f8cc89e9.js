import{b as h,A as V,d as w,r as k,o as e,c as s,w as d,W as H,f as g,E as x,i as I,a as z,h as m,k as l,j,X as A,e as t,F as B,y as p,Y as N,I as P}from"./index-338f6742.js";import{u as Y}from"./useLoading-d20fdbfd.js";var q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 112H724V72c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v40H500V72c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v40H320c-17.7 0-32 14.3-32 32v120h-96c-17.7 0-32 14.3-32 32v632c0 17.7 14.3 32 32 32h512c17.7 0 32-14.3 32-32v-96h96c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM664 888H232V336h218v174c0 22.1 17.9 40 40 40h174v338zm0-402H514V336h.2L664 485.8v.2zm128 274h-56V456L544 264H360v-80h68v32c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-32h152v32c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-32h68v576z"}}]},name:"snippets",theme:"outlined"};const F=q;function O(c){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?Object(arguments[n]):{},o=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),o.forEach(function(u){L(c,u,r[u])})}return c}function L(c,n,r){return n in c?Object.defineProperty(c,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):c[n]=r,c}var y=function(n,r){var o=O({},n,r.attrs);return h(V,O({},o,{icon:F}),null)};y.displayName="SnippetsOutlined";y.inheritAttrs=!1;const M=y,$={key:0,class:"flex items-center"},D=["onClick"],E=["onClick"],R={key:0},W={key:1},T={key:2},X={key:3},G={key:4},J={key:5},Q={key:6},U={key:7},Z={key:2,class:"flex items-center"},te=w({__name:"order",setup(c){const n=k([]),r=k([{title:"周期",dataIndex:"zq",key:"zq"},{title:"订单金额",dataIndex:"total_amount",key:"total_amount",minWidth:100,customRender:({record:i})=>x("div",i.total_amount/100+"元")},{title:"订单状态",dataIndex:"status",key:"status"},{title:"创建时间",dataIndex:"created_at",key:"created_at",customRender:({record:i})=>x("div",I.unix(i.created_at).format("YYYY-MM-DD HH:mm:ss"))},{title:"订单号",dataIndex:"trade_no",key:"trade_no"},{title:"操作",dataIndex:"operate",key:"operate"}]),{setLoading:o}=Y();async function u(){try{o(!0);const i=await H();o(!1),n.value=i.data}catch(i){o(!1),console.log(i)}}async function b(i){try{o(!0),await N({trade_no:i.trade_no}),await u(),o(!1),P.success("取消成功")}catch(f){o(!1),console.log(f)}}return u(),(i,f)=>{const _=g("a-tag"),S=g("a-table");return e(),s("div",null,[h(S,{dataSource:n.value,columns:r.value,pagination:!1,scroll:{x:900}},{bodyCell:d(({column:v,record:a})=>[v.key==="operate"?(e(),s("div",$,[z("div",{class:"text-theme cursor-pointer",onClick:C=>m(j).push("/order/"+a.trade_no)},[h(m(M)),l(" 详情 ")],8,D),a.status==0?(e(),s("div",{key:0,onClick:C=>b(a),class:"ml-5 text-red-500 cursor-pointer"},[h(m(A)),l(" 取消 ")],8,E)):t("",!0)])):t("",!0),v.key==="zq"?(e(),s(B,{key:1},[a.period=="month_price"?(e(),s("div",R,"月付")):t("",!0),a.period=="quarter_price"?(e(),s("div",W,"季付")):t("",!0),a.period=="half_year_price"?(e(),s("div",T,"半年付")):t("",!0),a.period=="year_price"?(e(),s("div",X,"年付")):t("",!0),a.period=="two_year_price"?(e(),s("div",G,"两年付")):t("",!0),a.period=="three_year_price"?(e(),s("div",J,"三年付")):t("",!0),a.period=="onetime_price"?(e(),s("div",Q,"一次性付")):t("",!0),a.period=="reset_price"?(e(),s("div",U,"流量重置包")):t("",!0)],64)):t("",!0),v.key==="status"?(e(),s("div",Z,[a.status==0?(e(),p(_,{key:0,color:"pink"},{default:d(()=>[l("待支付")]),_:1})):t("",!0),a.status==1?(e(),p(_,{key:1,color:"red"},{default:d(()=>[l("开通中")]),_:1})):t("",!0),a.status==2?(e(),p(_,{key:2,color:"orange"},{default:d(()=>[l("已取消")]),_:1})):t("",!0),a.status==3?(e(),p(_,{key:3,color:"green"},{default:d(()=>[l("已完成")]),_:1})):t("",!0),a.status==4?(e(),p(_,{key:4,color:"cyan"},{default:d(()=>[l("已折抵")]),_:1})):t("",!0)])):t("",!0)]),_:1},8,["dataSource","columns"])])}}});export{te as default};
