import{d as Z,r,u as tt,s as et,a5 as ot,o as u,c as p,a as t,h as o,y as D,w as l,e as U,b as c,t as d,i as R,I as v,a6 as st,a7 as at,a8 as it,a9 as nt,aa as lt,f as _,p as ct,l as dt,L as rt,k as B,F as ut,g as _t,_ as mt}from"./index-338f6742.js";import{u as ft}from"./useLoading-d20fdbfd.js";import{C as pt}from"./clipboard-f43a2bdf.js";const s=x=>(ct("data-v-2c0ba674"),x=x(),dt(),x),vt={class:"shadow-md bg-white rounded-xl border p-[15px]"},xt={class:"border-b pb-[10px] mb-[15px] flex items-center justify-between"},bt=s(()=>t("div",{class:"font-bold text-lg"},"邀请返利",-1)),ht={class:"flex items-center gap-x-2"},gt=s(()=>t("i",{class:"iconfont icon-29 text-[#fff]"},null,-1)),yt=s(()=>t("div",{class:"ml-2"},"佣金提现",-1)),wt=s(()=>t("i",{class:"iconfont icon-zhuanhuan text-[#fff]"},null,-1)),kt=s(()=>t("div",{class:"ml-2"},"佣金转换",-1)),Ct={class:"grid lg:grid-cols-4 lg:gap-3"},It={class:"border-b pb-[15px] mb-[15px] lg:pb-[0px] lg:border-b-0 lg:mb-[0px] lg:border-r px-[15px]"},jt={class:"flex items-center"},Ft={class:"flex-1"},Lt=s(()=>t("div",{class:"card-subtitle font-medium"},"可用佣金",-1)),St={class:"font-bold text-xl mt-[10px]"},Yt=s(()=>t("div",{class:"w-[38px] h-[38px] rounded-full bg-[#f1f3f5] flex items-center justify-center"},[t("i",{class:"iconfont icon-xinziguanli text-[#71869d]"})],-1)),Dt=s(()=>t("div",{class:"text-[#677789] mt-[10px]"},"您可以变现它",-1)),Ut={class:"border-b pb-[15px] mb-[15px] lg:pb-[0px] lg:border-b-0 lg:mb-[0px] lg:border-r px-[15px]"},Nt={key:0,class:"flex items-center"},Tt={class:"flex-1"},$t=s(()=>t("div",{class:"card-subtitle font-medium"},"分红比例",-1)),zt={class:"font-bold text-xl mt-[10px]"},At=s(()=>t("div",{class:"w-[38px] h-[38px] rounded-full bg-[#f1f3f5] flex items-center justify-center"},[t("i",{class:"iconfont icon-a-zijin2 text-[#71869d]"})],-1)),Ot={key:1,class:"flex items-center"},Rt={class:"flex-1"},Bt=s(()=>t("div",{class:"card-subtitle font-medium"},"三级分销比例",-1)),Ht={key:0,class:"font-bold text-xl mt-[10px]"},Mt={key:1,class:"font-bold text-xl mt-[10px]"},Vt=s(()=>t("div",{class:"w-[38px] h-[38px] rounded-full bg-[#f1f3f5] flex items-center justify-center"},[t("i",{class:"iconfont icon-a-zijin2 text-[#71869d]"})],-1)),Wt=s(()=>t("div",{class:"text-[#677789] mt-[10px]"},"您将按此比例分红",-1)),qt={class:"border-b pb-[15px] mb-[15px] lg:pb-[0px] lg:border-b-0 lg:mb-[0px] lg:border-r px-[15px]"},Et={class:"flex items-center"},Gt={class:"flex-1"},Jt=s(()=>t("div",{class:"card-subtitle font-medium"},"注册人数",-1)),Kt={class:"font-bold text-xl mt-[10px]"},Pt=s(()=>t("div",{class:"w-[38px] h-[38px] rounded-full bg-[#f1f3f5] flex items-center justify-center"},[t("i",{class:"iconfont icon-weibiaoti-_huabanfuben text-[#71869d]"})],-1)),Qt=s(()=>t("div",{class:"text-[#677789] mt-[10px]"},"成功邀请人数",-1)),Xt={class:"px-[15px]"},Zt={class:"flex items-center"},te={class:"flex-1"},ee=s(()=>t("div",{class:"card-subtitle font-medium"},"确认中佣金",-1)),oe={class:"font-bold text-xl mt-[10px]"},se=s(()=>t("div",{class:"w-[38px] h-[38px] rounded-full bg-[#f1f3f5] flex items-center justify-center"},[t("i",{class:"iconfont icon-zhaohuizijinhao01 text-[#71869d]"})],-1)),ae=s(()=>t("div",{class:"text-[#677789] mt-[10px]"},"佣金正在审核",-1)),ie={class:"shadow-md bg-white rounded-xl border p-[15px] mt-[30px]"},ne={class:"border-b pb-[10px] mb-[15px] flex items-center justify-between"},le=s(()=>t("div",{class:"font-bold text-lg"},"邀请返利",-1)),ce={class:"flex items-center gap-x-2"},de=s(()=>t("i",{class:"iconfont icon-chuangjian text-[#fff]"},null,-1)),re=s(()=>t("div",{class:"ml-2"},"创建邀请码",-1)),ue=["onClick"],_e={class:"shadow-md bg-white rounded-xl border p-[15px] mt-[30px]"},me=s(()=>t("div",{class:"border-b pb-[10px] mb-[15px] flex items-center"},[t("div",{class:"font-bold text-lg"},"佣金列表 (最近20条)")],-1)),fe={class:"mb-4"},pe=Z({__name:"invite",setup(x){const b=r(!1),h=r(!1),g=r(!1),y=r(!1),w=r(!1),k=r(!1),C=r(""),N=r([]),H=tt(),{getCommConfig:a,getUserInfo:I,getConfig:ve}=et(H),m=ot({withdraw_method:a.value.withdraw_methods[0],withdraw_account:""}),M=[{title:"ID",dataIndex:"id",key:"id"},{title:"邀请码",dataIndex:"code",key:"code"},{title:"创建时间",dataIndex:"created_at",key:"created_at",customRender:({text:e})=>R.unix(e).format("YYYY-MM-DD HH:mm:ss")},{title:"操作",dataIndex:"action",key:"action"}],V=[{title:"ID",dataIndex:"id",key:"id"},{title:"状态",dataIndex:"commission_status",key:"commission_status",customRender:({text:e})=>["待确认","发放中","有效","无效"][e]},{title:"佣金",dataIndex:"commission_balance",key:"commission_balance",customRender:({text:e})=>e/100},{title:"创建时间",dataIndex:"created_at",key:"created_at",customRender:({text:e})=>R.unix(e).format("YYYY-MM-DD HH:mm:ss")}];async function W(){if(!m.withdraw_account)return v.error("请输入提现账户");try{g.value=!0,await st(m),await j(),g.value=!1,v.success("提现成功"),b.value=!1}catch(e){g.value=!1,console.log(e)}}const{setLoading:L}=ft(),f=r([0,0,0,0,0]),T=r([]);async function j(){try{L(!0);const{data:e}=await at();f.value=e.stat,T.value=e.codes,L(!1)}catch(e){L(!1),console.log(e)}}async function q(){try{w.value=!0;const{data:e}=await it();w.value=!1,N.value=e}catch(e){w.value=!1,console.log(e)}}q(),j();async function E(){try{y.value=!0,await nt(),await j(),y.value=!1,v.success("创建成功")}catch(e){y.value=!1,console.log(e)}}async function G(){if(!C.value)return v.error("请输入划转金额");try{k.value=!0,await lt({transfer_amount:C.value*100}),await j(),k.value=!1,h.value=!1}catch(e){k.value=!1,console.log(e)}}function J(e){const i=new pt(".urlCopy",{text:function(){return`${window.location.origin}/#/login?code=${e.code}`}});i.on("success",()=>{v.success("复制成功"),i.destroy()}),i.on("error",()=>{v.error("复制失败,请手动复制"),i.destroy()})}return(e,i)=>{const S=_("a-button"),$=_("a-table"),K=_("a-select-option"),P=_("a-select"),F=_("a-form-item"),z=_("a-input"),A=_("a-form"),O=_("a-modal"),Q=_("a-alert"),X=_("a-input-number");return u(),p("div",null,[t("div",vt,[t("div",xt,[bt,t("div",ht,[o(a).withdraw_close==0?(u(),D(S,{key:0,type:"primary",onClick:i[0]||(i[0]=n=>b.value=!0)},{icon:l(()=>[gt]),default:l(()=>[yt]),_:1})):U("",!0),c(S,{type:"primary",onClick:i[1]||(i[1]=n=>h.value=!0)},{icon:l(()=>[wt]),default:l(()=>[kt]),_:1})])]),t("div",Ct,[t("div",It,[t("div",jt,[t("div",Ft,[Lt,t("div",St,d(f.value[4]?f.value[4]/100:"0")+" "+d(o(a).currency||"CNY"),1)]),Yt]),Dt]),t("div",Ut,[o(a).commission_distribution_enable==0?(u(),p("div",Nt,[t("div",Tt,[$t,t("div",zt,d(f.value[3])+"%",1)]),At])):(u(),p("div",Ot,[t("div",Rt,[Bt,o(I).commission_rate?(u(),p("div",Ht,d(o(a).commission_distribution_l1?(parseFloat(o(a).commission_distribution_l1)*o(I).commission_rate/100).toFixed(2):0)+"% "+d(o(a).commission_distribution_l2?(parseFloat(o(a).commission_distribution_l2)*o(I).commission_rate/100).toFixed(2):0)+"% "+d(o(a).commission_distribution_l3?(parseFloat(o(a).commission_distribution_l3)*o(I).commission_rate/100).toFixed(2):0)+"% ",1)):(u(),p("div",Mt,d(o(a).commission_distribution_l1?parseFloat(o(a).commission_distribution_l1)/10:0)+"% "+d(o(a).commission_distribution_l2?parseFloat(o(a).commission_distribution_l2)/10:0)+"% "+d(o(a).commission_distribution_l3?parseFloat(o(a).commission_distribution_l3)/10:0)+"% ",1))]),Vt])),Wt]),t("div",qt,[t("div",Et,[t("div",Gt,[Jt,t("div",Kt,d(f.value[0])+"人",1)]),Pt]),Qt]),t("div",Xt,[t("div",Zt,[t("div",te,[ee,t("div",oe,d(f.value[2]?f.value[2]/100:0)+" "+d(o(a).currency||"CNY"),1)]),se]),ae])])]),t("div",ie,[t("div",ne,[le,t("div",ce,[c(S,{type:"primary",onClick:E,loading:y.value},{icon:l(()=>[de]),default:l(()=>[re]),_:1},8,["loading"])])]),t("div",null,[c($,{dataSource:T.value,columns:M,pagination:!1,scroll:{x:470}},{bodyCell:l(({column:n,record:Y})=>[n.key=="action"?(u(),p("div",{key:0,class:"text-theme cursor-pointer pr-[10px] text-[13px] urlCopy",onClick:xe=>J(Y)},[c(o(rt)),B(" 复制链接 ")],8,ue)):U("",!0)]),_:1},8,["dataSource"])])]),t("div",_e,[me,t("div",null,[c($,{loading:w.value,dataSource:N.value,columns:V,pagination:!1,scroll:{x:470}},null,8,["loading","dataSource"])])]),t("div",null,[o(a).withdraw_close==0?(u(),D(O,{key:0,open:b.value,"onUpdate:open":i[4]||(i[4]=n=>b.value=n),title:"申请提现",onOk:W,okText:"提现",confirmLoading:g.value},{default:l(()=>[c(A,{model:m,autocomplete:"off",layout:"vertical"},{default:l(()=>[c(F,{label:"提现方式",name:"withdraw_method"},{default:l(()=>[c(P,{ref:"select",value:m.withdraw_method,"onUpdate:value":i[2]||(i[2]=n=>m.withdraw_method=n)},{default:l(()=>[(u(!0),p(ut,null,_t(o(a).withdraw_methods,(n,Y)=>(u(),D(K,{key:Y+n,value:n},{default:l(()=>[B(d(n),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),c(F,{label:"提现账户",name:"withdraw_account"},{default:l(()=>[c(z,{value:m.withdraw_account,"onUpdate:value":i[3]||(i[3]=n=>m.withdraw_account=n),placeholder:"请输入提现账户"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","confirmLoading"])):U("",!0),c(O,{open:h.value,"onUpdate:open":i[6]||(i[6]=n=>h.value=n),confirmLoading:k.value,title:"佣金划转",onOk:G,okText:"划转"},{default:l(()=>[t("div",fe,[c(Q,{message:"划转后的余额仅用于本站消费使用",type:"warning","show-icon":""})]),c(A,{model:m,autocomplete:"off",layout:"vertical"},{default:l(()=>[c(F,{label:"当前余额",name:"dqye"},{default:l(()=>[c(z,{value:`${f.value[4]/100} ${o(a).currency||"CNY"}`,disabled:""},null,8,["value"])]),_:1}),c(F,{label:"划转金额",name:"username"},{default:l(()=>[c(X,{value:C.value,"onUpdate:value":i[5]||(i[5]=n=>C.value=n),style:{width:"100%"},controls:!1},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","confirmLoading"])])])}}});const ye=mt(pe,[["__scopeId","data-v-2c0ba674"]]);export{ye as default};
